{
  "createdAt": "2025-07-25T00:53:32.612Z",
  "updatedAt": "2025-07-25T16:42:15.000Z",
  "id": "oChXpYcl4QoilVIS",
  "name": "Dividas CNPJ 1-2 (ehmconsultas - dividas/multi /cnpj)",
  "active": true,
  "nodes": [
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "fa9ae66b-e2a7-452f-8e85-8bfc5b29e237",
              "leftValue": "={{ $json.HEADER.PARAMETROS.CPFCNPJ.replace(/[.\\-\\/\\s]/g, '') }}",
              "rightValue": "={{ $('Webhook').item.json.body.CPF.replace(/[.\\-\\/\\s]/g, '') }}",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "5eecb8f8-c22a-4352-b282-ae13530054b1",
              "leftValue": "={{ $json.HEADER.INFORMACOES_RETORNO.STATUS_RETORNO.DESCRICAO }}",
              "rightValue": "SUCESSO",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "7020df52-e83f-48c7-8c14-dada8daf4715",
              "leftValue": "={{ $json.data }}",
              "rightValue": "",
              "operator": {
                "type": "object",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "id": "1d4cd66f-90d7-4fd9-a083-a969615602f0",
      "name": "If",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -2280,
        1200
      ]
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "destinationFieldName": "Consulta",
        "options": {}
      },
      "id": "ac847675-4c73-4162-bb1b-82a41c10d460",
      "name": "Aggregate6",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        4900,
        3400
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "b4c4b8b4-ac50-4977-b5b7-22b2d88b5eed",
              "name": "Cr√©ditos a retirar",
              "value": "={{ $('Dados N8N').item.json['Credito consulta'] }}",
              "type": "number"
            }
          ]
        },
        "options": {}
      },
      "id": "50d21be7-e04a-4f8e-82e0-f321a1c7a5a1",
      "name": "Cr√©ditos a retirar1",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.3,
      "position": [
        9960,
        2920
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "6611ca4d-c98b-4930-bf78-78785d12378b",
              "leftValue": "={{ $('Retornar Cr√©ditos1').item.json.creditos }}",
              "rightValue": "={{ $('Cr√©ditos a retirar1').item.json['Cr√©ditos a retirar'] }}",
              "operator": {
                "type": "number",
                "operation": "gte"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "88b49cc9-69c0-4b5a-9170-9a78f2ba5d38",
      "name": "Maior ou igual1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        10360,
        2900
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://api.uniconsultas.io:3000/3406bddf-8759-404e-bd3f-a4261a6c6ce6/select/api/credits",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "telefone",
              "value": "={{ $('Webhook').item.json.body.Telefone }}"
            }
          ]
        },
        "options": {}
      },
      "id": "f9aa92ef-d0bd-4d14-810e-7ff4a21b38ba",
      "name": "Verificar saldo",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        10800,
        2880
      ],
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://api.uniconsultas.io:3000/3406bddf-8759-404e-bd3f-a4261a6c6ce6/select/api/credits",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "telefone",
              "value": "={{ $('Webhook').item.json.body.Telefone }}"
            }
          ]
        },
        "options": {}
      },
      "id": "f212b230-a781-47d0-9c53-d2c57d976217",
      "name": "Retornar Cr√©ditos1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        9760,
        2920
      ],
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "3a0d598a-3b82-480e-b95a-b760b969e9fe",
              "leftValue": "={{ $('Retornar Cr√©ditos1').item.json.creditos }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "43b654a3-14ce-4343-b0d5-af6e4eef734b",
      "name": "Se cr√©dito existe1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        10140,
        2920
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://api.uniconsultas.io:3000/3406bddf-8759-404e-bd3f-a4261a6c6ce6/register/retirarcredits",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "telefone",
              "value": "={{ $('Webhook').item.json.body.Telefone }}"
            },
            {
              "name": "creditos",
              "value": "={{ $('Cr√©ditos a retirar1').item.json['Cr√©ditos a retirar'] }}"
            }
          ]
        },
        "options": {}
      },
      "id": "0dfbb112-0551-41c0-bbff-c13c7aafb985",
      "name": "Retirar Cr√©ditos1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        10600,
        2880
      ],
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "ad9c09c1-3aaf-4c42-ab43-9f8f30a12e99",
              "leftValue": "={{ $('Retornar Cr√©ditos1').item.json.creditos }}",
              "rightValue": "={{ $json.creditos }}",
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "166faa56-a5ec-4ee5-b9ed-47b5f7ed90cb",
      "name": "If20",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        11000,
        2880
      ]
    },
    {
      "parameters": {
        "content": "Retirar Cr√©ditos",
        "height": 252,
        "width": 1533
      },
      "id": "a458fff6-001f-4618-b1b7-d91a7af3eb1a",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        9700,
        2860
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "3db00fee-081d-4b19-99dd-cbc4ab4a0e0e",
              "name": "Nome Consulta",
              "value": "={{ $json['Tipo Consulta'] }}",
              "type": "string"
            },
            {
              "id": "ac5a7a11-a016-4827-a7ae-88a6490e25ec",
              "name": "URL Consulta Padr√£o",
              "value": "-",
              "type": "string"
            },
            {
              "id": "c166d2b9-681c-4216-8f4d-0d1737c888dd",
              "name": "Credito consulta",
              "value": "={{ $json['Credito consulta'] }}",
              "type": "number"
            }
          ]
        },
        "options": {}
      },
      "id": "3e3ab005-8302-4262-8711-9f3436d02816",
      "name": "Dados N8N",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.3,
      "position": [
        -7640,
        1000
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Webhook').item.json.body.Webhook }}",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "Telefone BC",
              "value": "={{ $('Webhook').item.json.body.Telefone }}"
            },
            {
              "name": "Retorno Consulta",
              "value": "Ok"
            },
            {
              "name": "Informa√ß√µes",
              "value": "={{ $('Aggregate6').item.json.Consulta[0]['Informa√ß√µes'].replace(/_ /g, '_') }}"
            },
            {
              "name": "Nome Menu",
              "value": "=_{{ $('Dados N8N').item.json['Nome Consulta'] }}_"
            },
            {
              "name": "Nome Menu Status",
              "value": "={{ $('Dados N8N').item.json['Nome Consulta'] }} - Online"
            },
            {
              "name": "Tipo consulta",
              "value": "={{ $('Webhook').item.json.body['Tipo consulta'] }}"
            },
            {
              "name": "Pend√™ncias",
              "value": "={{ $('Aggregate6').item.json.Consulta[1].Pendencias.replace(/_ /g, '_') }}"
            },
            {
              "name": "Protestos",
              "value": "={{ $('Aggregate6').item.json.Consulta[3].Protesto.replace(/_ /g, '_') }}"
            },
            {
              "name": "SCPC",
              "value": "={{ $('Aggregate6').item.json.Consulta[2].SCPC.replace(/_ /g, '_').replace(/Cr\\uFFFDdito/g, 'Cr√©dito') }}"
            },
            {
              "name": "URL PDF",
              "value": "=### PDF\n{{ $('IF PDF').item.json.FileUrl }}"
            }
          ]
        },
        "options": {}
      },
      "id": "29e0f08c-d06a-4353-ae27-697e0d0b8846",
      "name": "HTTP Request",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        8800,
        2880
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "fb2599d7-75ba-4dbe-a4e8-d40f922bb75e",
              "name": "api",
              "value": "cnpj_pros",
              "type": "string"
            },
            {
              "id": "3db00fee-081d-4b19-99dd-cbc4ab4a0e0e",
              "name": "Tipo Consulta",
              "value": "Consulta Serasa REFIN/PEFIN + SCPC Boa Vista + Protestos + Resumo IA (4 cr√©ditos)",
              "type": "string"
            },
            {
              "id": "ac5a7a11-a016-4827-a7ae-88a6490e25ec",
              "name": "URL Consulta Padr√£o",
              "value": "-",
              "type": "string"
            },
            {
              "id": "c166d2b9-681c-4216-8f4d-0d1737c888dd",
              "name": "Credito consulta",
              "value": 4,
              "type": "number"
            },
            {
              "id": "bcebf250-2d5f-4971-927c-55f5fa8d3a4f",
              "name": "Prompt Resumo IA",
              "value": "=Voc√™ receber√° dados financeiros e de pend√™ncias relacionadas a um CPF ou CNPJ, incluindo informa√ß√µes como d√≠vidas, protestos, status de cr√©dito e score. Sua tarefa √© organizar essas informa√ß√µes de maneira clara e objetiva, estruturando-as em se√ß√µes e terminando com um breve resumo da situa√ß√£o financeira da pessoa f√≠sica ou jur√≠dica.\n\nInstru√ß√µes para a Estrutura e Reda√ß√£o:\nEstrutura dos Dados:\nInicie apresentando as principais informa√ß√µes do CPF ou CNPJ, como nome, data de nascimento, nome da m√£e e situa√ß√£o na Receita Federal, se dispon√≠vel.\nCrie uma se√ß√£o que apresente, de forma resumida, todas as pend√™ncias financeiras, d√≠vidas e protestos identificados.\nApresente o score de cr√©dito e a probabilidade de inadimpl√™ncia, se forem disponibilizados.\n\nResumo da Situa√ß√£o Financeira:\nElabore um par√°grafo resumindo a situa√ß√£o financeira geral do CPF ou CNPJ.\nUse uma linguagem neutra e clara, apontando os riscos de cr√©dito, quantidade de d√≠vidas ou protestos e qualquer outra informa√ß√£o relevante que possa impactar a an√°lise do perfil financeiro.\n\nObserva√ß√µes Importantes:\nN√ÉO exiba ou informe nenhum dado de contato, incluindo telefones, endere√ßos ou e-mails.\nN√ÉO invente dados que n√£o foram explicitamente fornecidos.\nSiga rigorosamente as normas de prote√ß√£o de dados pessoais (LGPD), respeitando a privacidade do consultado.\n\nSegue abaixo um breve exemplo de resumo\n\"### Resumo da Situa√ß√£o Financeira\nRafael dos Santos Nogueira apresenta um hist√≥rico financeiro com m√∫ltiplas pend√™ncias, incluindo d√≠vidas com institui√ß√µes educacionais e um protesto registrado. O total das pend√™ncias varia, mas a principal d√≠vida se destaca no valor de R$ 1.467,62. Essas ocorr√™ncias podem impactar negativamente seu acesso ao cr√©dito. A situa√ß√£o atual sugere um certo risco de inadimpl√™ncia e √© recomend√°vel que Rafael busque regularizar suas pend√™ncias para evitar complica√ß√µes financeiras futuras.\"\n\nFa√ßa um breve resumo com no m√°ximo 700 caracteres de forma simples explicando a situa√ß√£o financeira utilizando todas as informa√ß√µes fornecidas. N√£o ignore nenhum dado. No resumo voc√™ n√£o precisa escrever ou listar todas as pend√™ncias. Apenas resumir com um total e quantidade dos titulos abaixo.\nO titulo do resumo precisa ser exatamente \"### RESUMO DA SITUA√á√ÉO FINANCEIRA\" (EM LETRAS MAI√öSCULAS)\nUma observa√ß√£o. O titulo dos menus est√£o entre ##\nRetorne apenas os dados a partir de \"## RESUMO DA SITUA√á√ÉO FINANCEIRA\"\n\nSegue abaixo os dados para formatar:",
              "type": "string"
            },
            {
              "id": "e91bebb7-5a96-4254-adef-d41486ba471e",
              "name": "Prompt PDF",
              "value": "=Objetivo:‚Ä®Formatar os dados da consulta de cr√©dito de forma estruturada e organizada, seguindo o modelo de an√°lise de cr√©dito do Serasa, retornando exclusivamente um c√≥digo HTML.\nInstru√ß√µes:\n* Retornar apenas o HTML, sem nenhum outro texto no output.\n* Seguir a estrutura de tabelas para organizar os dados.\n* Usar fontes de at√© 11px para informa√ß√µes dentro das tabelas.\n* Remover o t√≠tulo <h1>, mas adicionar duas quebras de linha (<br><br>) ap√≥s a logo para espa√ßamento.\n* N√£o alterar o campo \"URL-LOGO\", pois ele ser√° substitu√≠do dinamicamente.\n* Adicionar \"Resumo atrav√©s de IA\" no final, com um resumo dos dados recebidos bem b√°sico sem apresentar muitos os valores.\n* Incluir um rodap√© com informa√ß√µes de confidencialidade e LGPD, usando fonte de 9px e alinhado √† esquerda.\n* Nunca utilizar a express√£o \"Dados do Cotista\", apenas \"Dados\".\nFormato esperado:\n* HTML bem estruturado, com se√ß√µes claras.\n* Uso de <div> para blocos de informa√ß√µes e <table> para dados tabulares.\n* Listas <ul> para e-mails, telefones e parentes.\n* Footer fixo no final do relat√≥rio.\n* Caso a frase inicie e termine com _ pode remover. Ex: _Sem pend√™ncias registradas._ fica Sem pend√™ncias registradas.\n* √â obrigat√≥rio que todas as informa√ß√µes fornecidas abaixo conste no HTML.\n* Se tiver \"_Sem pend√™ncias registradas._\", \"_Sem pend√™ncias._\" ou algo que comece e termine com \"_\", remova o \"_\".\n* Se o dados como telefone, email ou parentes n√£o existir nos dados para serem formatados, n√£o crie a div class=\"section\". Voc√™ vai criar somente se existir informa√ß√µes.\n* Se n√£o existir nenhum email, n√£o adicione no html Email\n* Se n√£o existir nenhum telefone, n√£o adicione no html Telefone\n* Se n√£o existir nenhum Poss√≠veis Parentes, n√£o adicione no html Poss√≠veis Parentes\n* Se email estiver vazio ou n√£o existir, n√£o crie no html <strong>Email:</strong>\n* Se telefone estiver vazio ou n√£o existir, n√£o crie no html <strong>Telefone:</strong>\n\nAdicione um texto no final com os dados recebidos de \"RESUMO ATRAV√âS DE IA\"\"\n\nAdicione tamb√©m um rodap√© na p√°gina com fonte tamanho 9 alinhado a esquerda da p√°gina com os seguintes dados:\n\"INFORMA√á√ïES IMPORTANTES\nESTAS INFORMA√á√ïES S√ÉO CONFIDENCIAIS E DEVER√ÉO SER UTILIZADAS, √öNICA E EXCLUSIVAMENTE, PARA ORIENTA√á√ÉO DAS TRANSA√á√ïES COMERCIAIS DO USU√ÅRIO , RESPONSABILIZANDO-SE CIVIL E CRIMINALMENTE POR DANOS QUE OCASIONAR A TERCEIROS, QUANDO UTILIZADAS EM DESACORDO COM A LEGISLA√á√ÉO EM VIGOR.\n\nMINUTA DE DECLARA√á√ÉO LGPD\nDECLARO QUE A UTILIZA√á√ÉO DOS DADOS RESPEITAR√Å AS FINALIDADES E PROCEDIMENTOS LEGALMENTE ADMITIDOS PELA LEI GERAL DE PROTE√á√ÉO DE DADOS DIVULGADOS EM MINHA P√ÅGINA INICIAL DE ACESSO.\"\n\nHTML DE EXEMPLO 1:\n<!DOCTYPE html>\n<html lang=\"pt-BR\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Consulta de An√°lise de Cr√©dito</title>\n    <style>\n        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #eef2f7; }\n        .container { max-width: 900px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); }\n        .banner { width: 100%; height: auto; display: block; margin-bottom: 20px; }\n        .section { margin-bottom: 20px; padding: 20px; border-radius: 8px; background: #f9f9f9; border-left: 5px solid #181d3e; }\n        .section-header { font-size: 18px; font-weight: bold; color: #181d3e; margin-bottom: 15px; }\n        p, ul { margin: 5px 0; line-height: 1.6; }\n        table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 12px; }\n        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }\n        th { background-color: #181d3e; color: #fff; }\n        .highlight { font-weight: bold; color: #dc3545; }\n        .info { font-weight: bold; color: #495057; }\n        .score-box { text-align: center; padding: 20px; background: #e9ecef; border-radius: 8px; font-size: 20px; font-weight: bold; color: #28a745; }\n        .footer { font-size: 9px; padding: 10px; background: #f1f1f1; border-radius: 8px; text-align: left; }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <img src=\"URL-LOGO\" alt=\"Logo\" class=\"banner\"><br><br>\n        \n        <div class=\"section\">\n            <h2 class=\"section-header\">Dados</h2>\n            <p><span class=\"info\">Nome:</span> A&C LIMA HOLDING LTDA</p>\n            <p><span class=\"info\">CNPJ:</span> 34484128000190</p>\n            <p><span class=\"info\">Situa√ß√£o Cadastral:</span> Ativa</p>\n            <p><span class=\"info\">Porte:</span> Demais</p>\n            <p><span class=\"info\">Natureza Jur√≠dica:</span> Sociedade Empres√°ria Limitada</p>\n        </div>\n\n        <div class=\"section\">\n            <h2 class=\"section-header\">Telefone</h2>\n            <p><span class=\"info\">Telefone:</span> (15)32110164</p><br>\n            <h2 class=\"section-header\">Email</h2>\n            <p><span class=\"info\">Email:</span> legalizacao1@net-rosario.com.br</p><br>\n            <h2 class=\"section-header\">Endere√ßo</h2>\n            <p><span class=\"info\">Endere√ßo:</span> AVENIDA AGAMENON MAGALHAES, N√∫mero 1019, PAVMTO5                   SALA  505 - MAURICIO DE NASSAU</p>\n            <p><span class=\"info\">Cidade:</span> Caruaru</p>\n            <p><span class=\"info\">Estado:</span> PE</p>\n            <p><span class=\"info\">CEP:</span> 55014000</p>\n        </div>\n\n        <div class=\"section\">\n            <h2 class=\"section-header\">Atividade Principal</h2>\n            <p><span class=\"info\">Atividade Principal:</span> Constru√ß√£o de edif√≠cios</p>\n        </div>\n\n        <div class=\"section\">\n            <h2 class=\"section-header\">Atividade Secund√°ria</h2>\n            <p><span class=\"info\">Atividade Secund√°ria:</span> Incorpora√ß√£o de empreendimentos imobili√°rios</p>\n        </div>\n\n        <div class=\"section\">\n            <h2 class=\"section-header\">S√≥cios</h2>\n            <ul>\n                <li>AUGUSTO CEZAR LIMA JACINTO</li>\n            </ul>\n        </div>\n\n        <div class=\"section\">\n            <h2 class=\"section-header\">Pend√™ncias</h2>\n            <table>\n                <tr>\n                    <th>Data</th>\n                    <th>Contrato</th>\n                    <th>Origem</th>\n                    <th>Valor</th>\n                </tr>\n                <tr>\n                    <td>11/01/2024</td>\n                    <td>02401289250315</td>\n                    <td>R-EE  - OUTR</td>\n                    <td>R$115,96</td>\n                </tr>\n                <tr>\n                    <td>09/02/2024</td>\n                    <td>02402293463909</td>\n                    <td>R-EE  - OUTR</td>\n                    <td>R$114,96</td>\n                </tr>\n                <tr>\n                    <td>12/03/2024</td>\n                    <td>02403297718281</td>\n                    <td>R-EE  - OUTR</td>\n                    <td>R$115,20</td>\n                </tr>\n                <tr>\n                    <td>30/08/2024</td>\n                    <td>37/2561</td>\n                    <td>P-DUPLICATA</td>\n                    <td>R$3.861,00</td>\n                </tr>\n                <tr>\n                    <td>05/09/2024</td>\n                    <td>47/2567</td>\n                    <td>P-DUPLICATA</td>\n                    <td>R$3.861,00</td>\n                </tr>\n                <tr>\n                    <td>31/10/2024</td>\n                    <td>02410330628074</td>\n                    <td>R-EE  - OUTR</td>\n                    <td>R$22,09</td>\n                </tr>\n            </table>\n        </div>\n\n        <div class=\"section\">\n            <h2 class=\"section-header\">SCPC</h2>\n            <p><span class=\"info\">SCPC:</span> Sem pend√™ncias registradas.</p>\n        </div>\n\n        <div class=\"section\">\n            <h2 class=\"section-header\">Protestos</h2>\n            <table>\n                <tr>\n                    <th>Cidade</th>\n                    <th>Data</th>\n                    <th>Cart√≥rio</th>\n                    <th>Valor</th>\n                </tr>\n                <tr>\n                    <td>Caruaru - PE</td>\n                    <td>30/01/2025</td>\n                    <td>1</td>\n                    <td>R$4.127,41</td>\n                </tr>\n                <tr>\n                    <td>Caruaru - PE</td>\n                    <td>07/02/2025</td>\n                    <td>2</td>\n                    <td>R$4.119,69</td>\n                </tr>\n            </table>\n        </div>\n\n        <div class=\"section\">\n            <h2 class=\"section-header\">Resumo atrav√©s de IA</h2>\n            <p>A&C LIMA HOLDING LTDA apresenta um hist√≥rico financeiro com pend√™ncias registradas, com um total de R$ 4.246,10. Embora n√£o existam protestos, a presen√ßa de d√≠vidas pode impactar negativamente seu acesso ao cr√©dito. Al√©m disso, √© importante lembrar que a situa√ß√£o financeira da empresa pode ser afetada por fatores como a natureza jur√≠dica e o porte da empresa.</p>\n        </div>\n\n        <div class=\"section\">\n            <h2 class=\"section-header\">Sugest√µes para Regulariza√ß√£o em caso de D√©bitos</h2>\n            <ul>\n                <li>üìû <strong>Negociar d√©bitos:</strong> Contate os credores para verificar op√ß√µes de parcelamento.</li>\n                <li>üîç <strong>Acompanhar o CPF:</strong> Mantenha um monitoramento constante para evitar novas restri√ß√µes.</li>\n                <li>üìë <strong>Remover protestos quitados:</strong> Ap√≥s o pagamento, solicite a retirada do registro.</li>\n                <li>üìù <strong>Realizar pagamentos:</strong> Aumente a frequ√™ncia e os valores dos pagamentos para reduzir a d√≠vida.</li>\n            </ul>\n        </div>\n\n        <div class=\"footer\">\n            <p><strong>INFORMA√á√ïES IMPORTANTES:</strong> ESTAS INFORMA√á√ïES S√ÉO CONFIDENCIAIS E DEVER√ÉO SER UTILIZADAS, √öNICA E EXCLUSIVAMENTE, PARA ORIENTA√á√ÉO DAS TRANSA√á√ïES COMERCIAIS DO USU√ÅRIO, RESPONSABILIZANDO-SE CIVIL E CRIMINALMENTE POR DANOS QUE OCASIONAR A TERCEIROS, QUANDO UTILIZADAS EM DESACORDO COM A LEGISLA√á√ÉO EM VIGOR.<br><br></p>\n            <p><strong>MINUTA DE DECLARA√á√ÉO LGPD:</strong> DECLARO QUE A UTILIZA√á√ÉO DOS DADOS RESPEITAR√Å AS FINALIDADES E PROCEDIMENTOS LEGALMENTE ADMITIDOS PELA LEI GERAL DE PROTE√á√ÉO DE DADOS DIVULGADOS EM MINHA P√ÅGINA INICIAL DE ACESSO.</p>\n        </div>\n        \n        <div class=\"footer-link\" style=\"font-size: 9px; margin-top: 5px; text-align: center;\">\n            <a href=\"https://app.unisistemas.tech/Inicio\" target=\"_blank\">Acesse sua consulta em https://app.unisistemas.tech/Inicio</a>\n        </div>\n    </div>\n</body>\n</html>\n\nImportante, escreva \"Inicio HTML\" e \"Fim HTML\" no inicio e no final. Somente isso. N√£o escreva mais nenhum dados fora do c√≥digo.\nQuando for exatamente come√ßar o c√≥digo HTML, escreva da seguinte maneira: Inicio HTML\\n<!DOCTYPE html>\\n\nEscreva no c√≥digo html todas as informa√ß√µes fornecidas. N√£o ignore nenhum dado.\nUma observa√ß√£o. O titulo dos menus entr√£o entre <>\nCaso a frase comece e termine com \"_\", pode remover o \"_\"\nSempre formate no html utilizando TODOS os dados fornecidos abaixo como informa√ß√µes, valores, dados, tudo sem exce√ß√£o.\nVoc√™ vai adicionar na formata√ß√£o somente os dados existentes e informados abaixo.\nImportante. Se o dados como telefone, email ou parentes n√£o estiver dispon√≠vel e n√£o for fornecido, voc√™ n√£o precisa adicionar a \"div class\" no html.\nAdicione \"Sugest√µes para Regulariza√ß√£o em caso de D√©bitos\"\nSempre adicione <br> entre uma \"div class\" e outra.\n√â obrigat√≥rio que pend√™ncias, scpc, d√©bitos, refin e pefin e protestos sejam sempre em tabela.\nSiga fielmente o layout do exemplo de html acima.\nCaso a frase inicie e termine com _ pode remover. Ex: _Sem pend√™ncias registradas._ fica Sem pend√™ncias registradas.\nSe o dados como telefone, email ou parentes n√£o existir nos dados para serem formatados, n√£o crie a div class=\"section\". Voc√™ vai criar somente se existir informa√ß√µes.\n√â importante que voc√™ adicione no HTML somente os dados fornecidos abaixo que s√£o para formatar. Os dados dos HTML de exemplo servem somente para seguir o layout do HTML (Nunca utilize as informa√ß√µes de exemplo ou invente dados para adicionar no html formatado).\n√â obrigat√≥rio que todas as informa√ß√µes fornecidas abaixo conste no HTML.\nRemova todos os _ do html exceto de email.\nImportante, voc√™ vai formatar em pend√™ncias, somente o que est√° em pend√™ncias, voc√™ vai formatar em scpc, somente o que est√° em scpc e vai formatar em protestos, somente o que est√° em protestos. E assim por diante.\n\nAten√ß√£o, fa√ßa \"Resumo atrav√©s de IA\" levando em considera√ß√£o todos os dados informados abaixo.\n\nAten√ß√£o, todos os dados e informa√ß√µes acima server exclusivamente como exemplo para voc√™ estruturar o HTML.\nAs informa√ß√µes na formata√ß√£o do HTML precisam estar na mesma ordem dos dados para formatar.\nUtilize somente os dados abaixo para formatar o HTML:",
              "type": "string"
            },
            {
              "id": "81dcb3b4-64f2-4ab0-94e2-f245e8a7304d",
              "name": "URL-LOGO",
              "value": "=https://i.imgur.com/g0gImpK.jpeg",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "bb2a2111-9bb8-47ef-b3db-09a163e409fc",
      "name": "Dados N8N1",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.3,
      "position": [
        -7860,
        1000
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "ff0e48d3-59b6-494b-a0b4-1df69bb00592",
      "name": "Respond to Webhook1",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        -2020,
        1580
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "bfac3c94-a23c-4008-aa6c-dd5fcb21c8e6",
              "leftValue": "={{ $json.valido }}",
              "rightValue": "true",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            },
            {
              "id": "4d931b15-5abe-496e-b959-533c2910370e",
              "leftValue": "={{ $json.tipo }}",
              "rightValue": "CNPJ",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "ea8629cb-d104-45d9-aa2e-e18692a4e150",
      "name": "If15",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -7020,
        1000
      ]
    },
    {
      "parameters": {
        "content": "## CPF / CNPJ inv√°lido",
        "height": 876.7623384092028,
        "width": 456.60627452732734,
        "color": 3
      },
      "id": "b3b9d7f7-0d71-4fd4-8039-ddd081aa10a0",
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -7280,
        940
      ]
    },
    {
      "parameters": {
        "jsCode": "// Fun√ß√£o para validar o CPF\nfunction validarCPF(cpf) {\n    cpf = cpf.replace(/[^\\d]+/g, ''); // Remove caracteres n√£o num√©ricos\n    if (cpf.length !== 11 || /^(\\d)\\1+$/.test(cpf)) return false; // Verifica se possui 11 d√≠gitos e n√£o √© uma sequ√™ncia repetida\n\n    let soma = 0, resto;\n\n    // Valida√ß√£o do primeiro d√≠gito verificador\n    for (let i = 1; i <= 9; i++) {\n        soma += parseInt(cpf.substring(i - 1, i)) * (11 - i);\n    }\n    resto = (soma * 10) % 11;\n    if (resto === 10 || resto === 11) resto = 0;\n    if (resto !== parseInt(cpf.substring(9, 10))) return false;\n\n    // Valida√ß√£o do segundo d√≠gito verificador\n    soma = 0;\n    for (let i = 1; i <= 10; i++) {\n        soma += parseInt(cpf.substring(i - 1, i)) * (12 - i);\n    }\n    resto = (soma * 10) % 11;\n    if (resto === 10 || resto === 11) resto = 0;\n    if (resto !== parseInt(cpf.substring(10, 11))) return false;\n\n    return true;\n}\n\n// Fun√ß√£o para validar o CNPJ\nfunction validarCNPJ(cnpj) {\n    cnpj = cnpj.replace(/[^\\d]+/g, ''); // Remove caracteres n√£o num√©ricos\n    if (cnpj.length !== 14 || /^(\\d)\\1+$/.test(cnpj)) return false; // Verifica se possui 14 d√≠gitos e n√£o √© uma sequ√™ncia repetida\n\n    let tamanho = cnpj.length - 2;\n    let numeros = cnpj.substring(0, tamanho);\n    let digitos = cnpj.substring(tamanho);\n    let soma = 0;\n    let pos = tamanho - 7;\n\n    for (let i = tamanho; i >= 1; i--) {\n        soma += numeros.charAt(tamanho - i) * pos--;\n        if (pos < 2) pos = 9;\n    }\n\n    let resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\n    if (resultado != digitos.charAt(0)) return false;\n\n    tamanho = tamanho + 1;\n    numeros = cnpj.substring(0, tamanho);\n    soma = 0;\n    pos = tamanho - 7;\n\n    for (let i = tamanho; i >= 1; i--) {\n        soma += numeros.charAt(tamanho - i) * pos--;\n        if (pos < 2) pos = 9;\n    }\n\n    resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\n    if (resultado != digitos.charAt(1)) return false;\n\n    return true;\n}\n\n// Captura o CPF ou CNPJ diretamente do campo 'body.CPF' ou 'body.CNPJ' dentro do 'Webhook'\nconst numero = ($('Webhook').item.json.body.CPF || $('Webhook').item.json.body.CNPJ).replace(/[^\\d]+/g, '');\nconst tipo = numero.length === 11 ? 'CPF' : 'CNPJ';\nconst valido = tipo === 'CPF' ? validarCPF(numero) : validarCNPJ(numero);\n\nreturn [\n    {\n        json: {\n            numeroOriginal: numero,\n            tipo: tipo,\n            valido: valido // Retorna true ou false\n        }\n    }\n];\n"
      },
      "id": "dce08d48-e44f-47e9-8248-62658d66bb1d",
      "name": "Code2",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -7220,
        1000
      ],
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "d34c107f-15c6-4274-a4b2-f200e76be729",
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        -7000,
        1620
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Webhook').item.json.body.Webhook }}",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "TelefoneBC",
              "value": "={{ $('Webhook').item.json.body.Telefone }}"
            },
            {
              "name": "CPF",
              "value": "={{ $('Webhook').item.json.body.CPF }}"
            },
            {
              "name": "Consulta",
              "value": "=\nAten√ß√£o: O CNPJ informado √© inv√°lido. üö®\nVerifique os n√∫meros e digite corretamente.\n\nObs: Digite apenas n√∫meros, sem pontos, tra√ßos ou espa√ßos."
            },
            {
              "name": "Retorno Consulta",
              "value": "Ok"
            }
          ]
        },
        "options": {}
      },
      "id": "de9616de-f052-44ce-8661-7859da9f8139",
      "name": "HTTP Request7",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -7200,
        1620
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "b3537d53-3488-4a2c-8c87-079f40680398",
              "leftValue": "={{ $('Webhook').item.json.body.Webhook }}",
              "rightValue": "botconversa",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "d4f2b1fb-20a6-4e9c-8014-18e9dbdc01b5",
      "name": "If14",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -7200,
        1420
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Webhook').item.json.body.Webhook }}",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "Telefone BC",
              "value": "={{ $('Webhook').item.json.body.Telefone }}"
            },
            {
              "name": "Retorno Consulta",
              "value": "CPF inv√°lido"
            },
            {
              "name": "Informa√ß√µes",
              "value": "=Aten√ß√£o: O CNPJ informado √© inv√°lido. üö®\nVerifique os n√∫meros e digite corretamente."
            },
            {
              "name": "Nome Menu",
              "value": "=_{{ $('Dados N8N').item.json['Nome Consulta'] }}_"
            },
            {
              "name": "Nome Menu Status",
              "value": "={{ $('Dados N8N').item.json['Nome Consulta'] }} - Online"
            },
            {
              "name": "Tipo consulta",
              "value": "={{ $('Webhook').item.json.body['Tipo consulta'] }}"
            },
            {
              "name": "Pend√™ncias",
              "value": "=Erro"
            },
            {
              "name": "Protestos",
              "value": "=Erro"
            },
            {
              "name": "SCPC",
              "value": "=Erro"
            },
            {
              "name": "URL PDF",
              "value": "=Erro"
            },
            {
              "name": "Resumo IA",
              "value": "Erro"
            }
          ]
        },
        "options": {}
      },
      "id": "ec34b007-7d02-4e49-a50a-c8d16c519546",
      "name": "Erro1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -7020,
        1400
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Webhook').item.json.body.Webhook }}",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "TelefoneBC",
              "value": "={{ $('Webhook').item.json.body.Telefone }}"
            },
            {
              "name": "CPF",
              "value": "={{ $('Webhook').item.json.body.CPF }}"
            },
            {
              "name": "Consulta",
              "value": "=\n\n## PDF\n{{ $('IF PDF').item.json.FileUrl }}\n\n\n______________________________________________________________\n\n\n\n{{ $('CONSULTA _ TEXTO').item.json['CONSULTA _ TEXTO'].replace(/_ /g, '_').replace(/[*_]/g, '') }}"
            },
            {
              "name": "Retorno Consulta",
              "value": "Ok"
            },
            {
              "name": "URL PDF",
              "value": "="
            }
          ]
        },
        "options": {}
      },
      "id": "af3635cd-1dd4-4add-9914-f7e8c5ff6a69",
      "name": "HTTP Request5",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        8800,
        3140
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "b3537d53-3488-4a2c-8c87-079f40680398",
              "leftValue": "={{ $('Webhook').item.json.body.Webhook }}",
              "rightValue": "botconversa",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "0e867b25-fdc4-44ec-9b01-94cf9c2357d8",
      "name": "If16",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        8480,
        2900
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "1b32d6d0-9eaa-4140-a1af-e138f0b74343",
      "name": "Respond to Webhook3",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        9240,
        2920
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://n8n.redequeroimoveis.com/webhook/dividas-cnpj_1-2",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "CPF",
              "value": "={{ $('If15').item.json.numeroOriginal.replace(/[.\\-\\/\\s]/g, '') }}"
            },
            {
              "name": "Telefone",
              "value": "={{ $('Webhook').item.json.body.Telefone }}"
            },
            {
              "name": "Webhook",
              "value": "={{ $('Webhook').item.json.body.Webhook }}"
            },
            {
              "name": "URL_LogoPDF",
              "value": "={{ $('Webhook').item.json.body.URL_LogoPDF }}"
            },
            {
              "name": " Tipo consulta",
              "value": "Completa"
            },
            {
              "name": "Prompt Resumo IA",
              "value": "={{ $('Dados N8N1').item.json['Prompt Resumo IA'] }}"
            },
            {
              "name": "Prompt PDF",
              "value": "={{ $('Dados N8N1').item.json['Prompt PDF'] }}"
            },
            {
              "name": "URL-LOGO",
              "value": "={{ $('Dados N8N1').item.json['URL-LOGO'] }}"
            },
            {
              "name": "RequestToken",
              "value": "={{ $('Webhook').item.json.body.RequestToken }}"
            },
            {
              "name": "Informa√ß√µes",
              "value": "={{ $('Webhook').item.json.body[\"Informa√ß√µes\"] }}"
            }
          ]
        },
        "options": {}
      },
      "id": "5a730507-e9da-4b80-8948-56a2cb8311b9",
      "name": "HTTP Request19",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        -2200,
        1580
      ],
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "content": "## CONTINUA√á√ÉO",
        "height": 251.51571340885795,
        "width": 571.376359106563,
        "color": 6
      },
      "id": "5ea47b0c-7db0-4d86-9132-f7805999e062",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -2420,
        1520
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "248d9775-39cd-41ed-98c2-10f0139e9ffe",
              "leftValue": "={{ $('Webhook').item.json.body['Tipo consulta'] }}",
              "rightValue": "Completa",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "ed48c299-65db-4748-9ead-fdbaf6e2d648",
              "leftValue": "={{ $('Webhook').item.json.body['Tipo consulta'] }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            },
            {
              "id": "39809eeb-8ba1-431b-b071-7fe550922802",
              "leftValue": "={{ $('Webhook').item.json.body.CPF }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            },
            {
              "id": "56b202bc-2a4e-4c37-b8f5-8665b2883065",
              "leftValue": "={{ $('Webhook').item.json.body.CPF }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "id": "d3fa85d1-a34e-423b-8675-fb202eaaa3a1",
      "name": "If9",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        5280,
        3400
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "b3537d53-3488-4a2c-8c87-079f40680398",
              "leftValue": "={{ $('Webhook').item.json.body.Webhook }}",
              "rightValue": "typebot",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "b2b30bc1-f4d3-4fb9-9ed8-285c78fbbea7",
              "leftValue": "={{ $('Webhook').item.json.body.Webhook }}",
              "rightValue": "consultasite44",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "id": "be914964-bf7d-44e2-a560-97b49deb1681",
      "name": "se typebot",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -7200,
        1220
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "4523dbda-713f-421c-94d1-db6b52bbbe08",
              "name": "resposta",
              "value": "=Aten√ß√£o: O CNPJ informado √© inv√°lido. üö®\nVerifique os n√∫meros e digite corretamente.",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "95a1ab04-0b93-4eb9-b2ad-76392932f9bc",
      "name": "typebot",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.3,
      "position": [
        -6840,
        1180
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "b3537d53-3488-4a2c-8c87-079f40680398",
              "leftValue": "={{ $('Webhook').item.json.body.Webhook }}",
              "rightValue": "typebot",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "118de597-6f66-4743-a924-53bda7fac6c3",
      "name": "se typebot1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        8480,
        2640
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "fa9ae66b-e2a7-452f-8e85-8bfc5b29e237",
              "leftValue": "={{ $json.data }}",
              "rightValue": "SUCESSO",
              "operator": {
                "type": "object",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "id": "f73d6c76-5153-478a-9fa1-82e046588463",
      "name": "If19",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -3140,
        1160
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Webhook').item.json.body.Webhook }}",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "Telefone BC",
              "value": "={{ $('Webhook').item.json.body.Telefone }}"
            },
            {
              "name": "Retorno Consulta",
              "value": "Erro"
            },
            {
              "name": "Informa√ß√µes",
              "value": "={{ $json['Consulta erro'] }}"
            },
            {
              "name": "Nome Menu",
              "value": "=_{{ $('Dados N8N').item.json['Nome Consulta'] }}_"
            },
            {
              "name": "Nome Menu Status",
              "value": "={{ $('Dados N8N').item.json['Nome Consulta'] }} - Online"
            },
            {
              "name": "Tipo consulta",
              "value": "={{ $('Webhook').item.json.body['Tipo consulta'] }}"
            },
            {
              "name": "Pend√™ncias",
              "value": "=Erro"
            },
            {
              "name": "Protestos",
              "value": "=Erro"
            },
            {
              "name": "SCPC",
              "value": "=Erro"
            },
            {
              "name": "URL PDF",
              "value": "=Erro"
            },
            {
              "name": "Resumo IA",
              "value": "Erro"
            },
            {
              "name": "Cadin",
              "value": "Erro"
            }
          ]
        },
        "options": {}
      },
      "id": "1686fc9a-da64-4b34-8b8d-17a6117f8c33",
      "name": "Erro",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -1420,
        2980
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Webhook').item.json.body.Webhook }}",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "TelefoneBC",
              "value": "={{ $('Webhook').item.json.body.Telefone }}"
            },
            {
              "name": "CPF",
              "value": "={{ $('Webhook').item.json.body.CPF }}"
            },
            {
              "name": "Consulta",
              "value": "={{ $json['Consulta erro'] }}"
            },
            {
              "name": "Retorno Consulta",
              "value": "Ok"
            }
          ]
        },
        "options": {}
      },
      "id": "76a41d0f-a16a-4d7f-9175-ae175f33d0b0",
      "name": "HTTP Request6",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -1640,
        3160
      ]
    },
    {
      "parameters": {
        "content": "## ERRO CONSULTA",
        "height": 647.1423012728503,
        "width": 455.90538040659635,
        "color": 3
      },
      "id": "9d656950-01a0-4b12-8334-43a20e0bf880",
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1700,
        2700
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "4efcf5d4-a2f8-45a9-9cb2-68cdee65195d",
      "name": "Date & Time1",
      "type": "n8n-nodes-base.dateTime",
      "typeVersion": 2,
      "position": [
        -1620,
        2120
      ]
    },
    {
      "parameters": {
        "jsCode": "// Obt√©m a data e hora do campo\nconst currentDate = new Date($('Date & Time1').item.json.currentDate);\n\n// Converte para o hor√°rio de S√£o Paulo (GMT-3)\nconst options = { timeZone: 'America/Sao_Paulo', hour12: false };\nconst brazilianTime = new Date(currentDate.toLocaleString('en-US', options));\n\n// Obt√©m o dia da semana (0 = Domingo, 1 = Segunda, ..., 6 = S√°bado) e a hora\nconst dayOfWeek = brazilianTime.getDay(); // 0=Domingo, 1=Segunda, ..., 6=S√°bado\nconst hour = brazilianTime.getHours();\n\n// Verifica se a hora est√° entre 08:00 e 18:00 e se o dia √© √∫til (segunda a sexta)\nif (hour >= 9 && hour < 18 && dayOfWeek >= 1 && dayOfWeek <= 5) {\n    return {\n        json: {\n            status: 'Hor√°rio funcionamento'\n        }\n    };\n} else {\n    return {\n        json: {\n            status: 'Fora do hor√°rio'\n        }\n    };\n}\n"
      },
      "id": "e481c3af-7172-4291-9d73-d15e9d131099",
      "name": "Code Hor√°rio funcionamento",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1440,
        2120
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "00cfe53f-c309-4404-87b3-de0a2064903a",
              "name": "Consulta erro",
              "value": "Tente novamente utilizando outra op√ß√£o de consulta dispon√≠vel.",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "f4913e6b-2a8f-4cfa-b7bb-5daa9b540f1f",
      "name": "Hor√°rio funcionamento1",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.3,
      "position": [
        -1440,
        2280
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "8ec90439-29cc-4f7e-9318-906539cd9a2d",
              "leftValue": "={{ $json.status }}",
              "rightValue": "funcionamento",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "c17ceabe-4c47-4dd4-985a-fcee9eca050d",
      "name": "Verificar Hor√°rio funcionamento",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -1620,
        2280
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "00cfe53f-c309-4404-87b3-de0a2064903a",
              "name": "Consulta erro",
              "value": "üïó Alguns bir√¥s restringem as consultas ao hor√°rio comercial. Aguarde at√© o hor√°rio de funcionamento para realizar a consulta e melhor experi√™ncia ou tente novamente utilizando outra op√ß√£o dispon√≠vel.",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "6af10448-f9f3-4eb0-afbe-5fbe9f049f1c",
      "name": "Fora do hor√°rio",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.3,
      "position": [
        -1620,
        2420
      ]
    },
    {
      "parameters": {
        "content": "## Hor√°rio funcionamento",
        "height": 578.2747827033502,
        "width": 397.97803245596407,
        "color": 3
      },
      "id": "df92aaa0-6bfd-4c5f-95bc-5a32ada5da43",
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1680,
        2040
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "55de02d9-bfad-489d-9a3d-c826358bdc78",
      "name": "Respond to Webhook4",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        -1420,
        3160
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "b3537d53-3488-4a2c-8c87-079f40680398",
              "leftValue": "={{ $('Webhook').item.json.body.Webhook }}",
              "rightValue": "botconversa",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "89089ca6-5120-4745-8e12-25f9fe9cc9c7",
      "name": "If21",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -1640,
        3000
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "b3537d53-3488-4a2c-8c87-079f40680398",
              "leftValue": "={{ $('Webhook').item.json.body.Webhook }}",
              "rightValue": "typebot",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "0abff81a-842f-4fc0-8488-28b3c417cbcb",
              "leftValue": "={{ $('Webhook').item.json.body.Webhook }}",
              "rightValue": "consultasite44",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "id": "bb131035-04ac-4cab-b468-c3b779fb7e3e",
      "name": "se typebot2",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -1640,
        2800
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "4523dbda-713f-421c-94d1-db6b52bbbe08",
              "name": "resposta",
              "value": "={{ $json['Consulta erro'] }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "61456381-b653-4e44-b3ae-f4aaf68e30f8",
      "name": "typebot2",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.3,
      "position": [
        -1240,
        2780
      ]
    },
    {
      "parameters": {},
      "id": "975f300a-4a81-4823-8235-f0d4a0a6d7ae",
      "name": "Limit1",
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -2360,
        1580
      ]
    },
    {
      "parameters": {
        "url": "=http://api.ehmconsultas.com:8880/dividas/multi/cnpj_{{ $json.value[1].split(':')[1].trim().split('_')[1] }}/{{ $('If15').item.json.numeroOriginal.replace(/[.\\-\\/\\s]/g, '') }}",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "user_token",
              "value": "29447aaaa3ad93d43d3a0bf5f5eaf19185547be7c0875eab126a229003b0c4e6ab266631"
            },
            {
              "name": "token",
              "value": "KiDXU8psYtx08RrwMbhqQN3X1tDLEcS5J8nznoQZDy2PmSO7XnCtQ5kFZX7x"
            }
          ]
        },
        "options": {
          "redirect": {
            "redirect": {}
          },
          "response": {
            "response": {
              "responseFormat": "json"
            }
          }
        }
      },
      "id": "05b587f5-8ef8-4adb-a696-cdef063f7117",
      "name": "HTTP Request1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        -3980,
        1160
      ],
      "retryOnFail": false,
      "maxTries": 5,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "9cb94037-f769-42b3-9255-c44ea3453468",
              "leftValue": "={{ $('Webhook').item.json.body[\"Informa√ß√µes\"] }}",
              "rightValue": "erro",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "90c407f6-f470-43d4-88ce-5c70d03fb42d",
      "name": "If42",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -600,
        340
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "e5c78911-1718-4e18-9728-fe15eaa93c45",
              "name": "Informa√ß√µes",
              "value": "=*CNPJ:* _{{ $('If15').item.json.numeroOriginal.replace(/[.\\-\\/\\s]/g, '') }}_",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "66c674d9-a188-4abd-a12b-f8ebffcfc240",
      "name": "Informa√ß√µes",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.3,
      "position": [
        -780,
        620
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "49e85b80-0532-46a3-8a58-2528501bf09e",
              "name": "CONSULTA _ TEXTO",
              "value": "=## INFORMA√á√ïES\n{{ $('Aggregate6').item.json.Consulta[0]['Informa√ß√µes'].replace(/_ /g, '_') }}\n\n--------------------------------------------------------------\n\n## PEND√äNCIAS\n{{ $('Aggregate6').item.json.Consulta[1].Pendencias.replace(/_ /g, '_') }}\n--------------------------------------------------------------\n\n## SCPC\n{{ $('Aggregate6').item.json.Consulta[2].SCPC.replace(/_ /g, '_') }}\n--------------------------------------------------------------\n\n## PROTESTOS\n{{ $('Aggregate6').item.json.Consulta[3].Protesto.replace(/_ /g, '_') }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "d9554a06-d34c-4624-9e6d-c9954f8b6389",
      "name": "CONSULTA _ TEXTO",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.3,
      "position": [
        5620,
        3400
      ]
    },
    {
      "parameters": {
        "model": "llama-3.3-70b-versatile",
        "options": {
          "temperature": 0
        }
      },
      "id": "1c8142bb-4147-4fb0-940f-53a89acf2105",
      "name": "Groq Chat Model2",
      "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
      "typeVersion": 1,
      "position": [
        5640,
        3820
      ],
      "credentials": {
        "groqApi": {
          "id": "0U8f3VFF5G2KERm1",
          "name": "Groq account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const items = [];\nfor (let i = 0; i < 10; i++) {\n  items.push({ json: { iteration: i + 1 } });\n}\nreturn items;"
      },
      "id": "78b9ab1c-ddfa-4b97-aa24-ab9140340a81",
      "name": "Code3",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        6140,
        3820
      ]
    },
    {
      "parameters": {
        "amount": 1
      },
      "id": "abc30b81-5d1c-4bc1-8f81-f61cda3ceddd",
      "name": "Wait4",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        6560,
        3840
      ],
      "webhookId": "cb99f997-b1c5-4a22-9561-db242424fd1f"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "195af974-c126-484e-b5a5-acc1383966d5",
              "leftValue": "={{ $json.output }}",
              "rightValue": "Fim HTML",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "88d65093-2062-4bb2-8c09-b886be978aa4",
              "leftValue": "={{ $json.output }}",
              "rightValue": "Inicio HTML",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "4e53ceab-27cb-4326-9ceb-1f0a84a3ceed",
              "leftValue": "={{ $json.output }}",
              "rightValue": "<!DOCTYPE html>",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "5bea24d3-e5a1-4548-8613-41ac8a057cb7",
              "leftValue": "={{ $json.output }}",
              "rightValue": "URL-LOGO",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "d7e3ee7c-f821-4a56-968c-8f34bf65bc9a",
              "leftValue": "={{ $json.output }}",
              "rightValue": ">Pend√™ncias<",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "061bd90b-7b4e-458a-b081-b10f9e56a75e",
              "leftValue": "={{ $json.output }}",
              "rightValue": ">SCPC<",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "3b079008-20e9-41bb-bbdb-f2a1a071babb",
              "leftValue": "={{ $json.output }}",
              "rightValue": ">Protestos<",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "49bd547a-fc91-42a9-a0f6-a441b6e406a6",
      "name": "If22",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        5940,
        3640
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://v2.api2pdf.com/chrome/pdf/html",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "085551d3-3165-49d6-9fff-22ac23f127b9"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "html",
              "value": "={{ \n  (() => {\n    const html = $('Code Formatar HTML').item.json.htmlContent;\n    const urlImg = $('If27').item.json['URL PDF Imagem'];\n    const urlFallback = $('Dados N8N1').item.json['URL-LOGO'];\n    const url = urlImg && urlImg.trim() !== '' ? urlImg : urlFallback;\n    return html.replace(/LOGOARTHUR/g, url).replace(/URL-LOGO/g, url);\n  })()\n    .replace(/```html|```|Inicio HTML|In√≠cio HTML|Fim HTML/g, '')\n}}"
            }
          ]
        },
        "options": {
          "allowUnauthorizedCerts": true
        }
      },
      "id": "6a4a91ea-c9a3-4ed9-989b-f7cf3633b1c4",
      "name": "Gerar PDF API1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        6360,
        3640
      ],
      "alwaysOutputData": true,
      "retryOnFail": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "try {\n    // Obter a string de HTML do campo {{ $json.output }}\n    const htmlString = $json.output;\n\n    // Verificar se htmlString est√° definido e √© uma string\n    if (!htmlString || typeof htmlString !== 'string') {\n        throw new Error(\"O campo 'output' est√° vazio ou n√£o √© uma string.\");\n    }\n\n    // Encontrar o √≠ndice da primeira ocorr√™ncia de 'Inicio HTML'\n    const doctypeIndex = htmlString.indexOf('Inicio HTML\\n<!DOCTYPE html>\\n');\n\n    // Se a string for encontrada, cortar tudo antes dela\n    let htmlContent = doctypeIndex !== -1 ? htmlString.slice(doctypeIndex) : htmlString;\n\n    // Substituir \"URL-LOGO\" por \"LOGOARTHUR\"\n    htmlContent = htmlContent.replace('URL-LOGO', 'LOGOARTHUR');\n\n    // Substituir tabelas espec√≠ficas por par√°grafos informativos\n    htmlContent = htmlContent.replace(\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Contrato<\\/th>\\s*<th>Origem<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Cidade<\\/th>\\s*<th>Origem<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Cidade<\\/th>\\s*<th>Data<\\/th>\\s*<th>Cart√≥rio<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Contrato<\\/th>\\s*<th>Origem<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td>\\s*<\\/td>\\s*<td>\\s*<\\/td>\\s*<td>\\s*<\\/td>\\s*<td>\\s*<\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Informante<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n    ).replace(\n\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Contrato<\\/th>\\s*<th>Origem<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td><\\/td>\\s*<td><\\/td>\\s*<td><\\/td>\\s*<td><\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Cidade<\\/th>\\s*<th>Origem<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td><\\/td>\\s*<td><\\/td>\\s*<td><\\/td>\\s*<td><\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Cidade<\\/th>\\s*<th>Data<\\/th>\\s*<th>Cart√≥rio<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td><\\/td>\\s*<td><\\/td>\\s*<td><\\/td>\\s*<td><\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Contrato<\\/th>\\s*<th>Origem<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td>\\s*<\\/td>\\s*<td>\\s*<\\/td>\\s*<td>\\s*<\\/td>\\s*<td>\\s*<\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Informante<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td><\\/td>\\s*<td><\\/td>\\s*<td><\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n    ).replace(\n\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Contrato<\\/th>\\s*<th>Origem<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td>-<\\/td>\\s*<td>-<\\/td>\\s*<td>-<\\/td>\\s*<td>-<\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Cidade<\\/th>\\s*<th>Origem<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td>-<\\/td>\\s*<td>-<\\/td>\\s*<td>-<\\/td>\\s*<td>-<\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Cidade<\\/th>\\s*<th>Data<\\/th>\\s*<th>Cart√≥rio<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td>-<\\/td>\\s*<td>-<\\/td>\\s*<td>-<\\/td>\\s*<td>-<\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Contrato<\\/th>\\s*<th>Origem<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td>\\s*<\\/td>\\s*<td>\\s*<\\/td>\\s*<td>\\s*<\\/td>\\s*<td>\\s*<\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Informante<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td>-<\\/td>\\s*<td>-<\\/td>\\s*<td>-<\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Cidade<\\/th>\\s*<th>Origem<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Cidade<\\/th>\\s*<th>Data<\\/th>\\s*<th>Cart√≥rio<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Cidade<\\/th>\\s*<th>Origem<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Contrato<\\/th>\\s*<th>Origem<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<td><\\/td>\\s*<td><\\/td>\\s*<td><\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Contrato<\\/th>\\s*<th>Origem<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<td>Sem informa√ß√µes dispon√≠veis.<\\/td>\\s*<td>Sem informa√ß√µes dispon√≠veis.<\\/td>\\s*<td>Sem informa√ß√µes dispon√≠veis.<\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Cidade<\\/th>\\s*<th>Origem<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<td>Sem informa√ß√µes dispon√≠veis.<\\/td>\\s*<td>Sem informa√ß√µes dispon√≠veis.<\\/td>\\s*<td>Sem informa√ß√µes dispon√≠veis.<\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Cidade<\\/th>\\s*<th>Data<\\/th>\\s*<th>Cart√≥rio<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td>Sem pend√™ncias registradas.<\\/td>\\s*<td>Sem informa√ß√µes dispon√≠veis.<\\/td>\\s*<td>Sem informa√ß√µes dispon√≠veis.<\\/td>\\s*<td>Sem informa√ß√µes dispon√≠veis.<\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Contrato<\\/th>\\s*<th>Origem<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td>Sem informa√ß√µes registradas.<\\/td>\\s*<td>Sem informa√ß√µes dispon√≠veis.<\\/td>\\s*<td>Sem informa√ß√µes dispon√≠veis.<\\/td>\\s*<td>Sem informa√ß√µes dispon√≠veis.<\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Data<\\/th>\\s*<th>Cidade<\\/th>\\s*<th>Origem<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td>Sem informa√ß√µes registradas.<\\/td>\\s*<td>Sem informa√ß√µes dispon√≠veis.<\\/td>\\s*<td>Sem informa√ß√µes dispon√≠veis.<\\/td>\\s*<td>Sem informa√ß√µes dispon√≠veis.<\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n    ).replace(\n        /<table>\\s*<tr>\\s*<th>Cidade<\\/th>\\s*<th>Data<\\/th>\\s*<th>Cart√≥rio<\\/th>\\s*<th>Valor<\\/th>\\s*<\\/tr>\\s*<tr>\\s*<td>Sem informa√ß√µes registradas.<\\/td>\\s*<td>Sem informa√ß√µes dispon√≠veis.<\\/td>\\s*<td>Sem informa√ß√µes dispon√≠veis.<\\/td>\\s*<td>Sem informa√ß√µes dispon√≠veis.<\\/td>\\s*<\\/tr>\\s*<\\/table>\\s*<\\/div>/g,\n        '<p>Sem pend√™ncias registradas.</p></div>'\n\n);\n\n\n    // Retornar o conte√∫do modificado\n    return { htmlContent };\n} catch (error) {\n    // Em caso de erro, retornar a string {{ $json.message.content }}\n    return { htmlContent: $json.message?.content || \"Erro desconhecido\" };\n}"
      },
      "id": "c2ded945-544a-47a4-b2d4-8826898eefa9",
      "name": "Code Formatar HTML",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        6120,
        3640
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "aa5c0737-4bab-49c3-8068-ba7384e01e70",
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        6360,
        3820
      ]
    },
    {
      "parameters": {},
      "id": "20853ed0-5faa-4a57-a23b-316f1a0b9dc6",
      "name": "Limit",
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        5960,
        3820
      ]
    },
    {
      "parameters": {},
      "id": "d182f5dc-ac52-4b54-aa80-51360d93cd54",
      "name": "Limit3",
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        6800,
        3640
      ]
    },
    {
      "parameters": {
        "content": "## GROQ",
        "height": 810.5701325137197,
        "width": 1470.1173247966844,
        "color": 6
      },
      "id": "9e914d3c-ac0d-4beb-9e63-73d4e3910644",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        5480,
        3260
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "f72aecac-f8f3-445b-b743-03e61e2bf49b",
              "leftValue": "={{ $('Webhook').item.json.body.Webhook }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "8dcedb35-db05-4327-b043-2ccfcf7adde9",
      "name": "IF PDF",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        6580,
        3640
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://n8n.unisistemas.tech/webhook/resposta-typebot",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "TelefoneBC",
              "value": "={{ $('Webhook').item.json.body.Telefone }}"
            },
            {
              "name": "CPF",
              "value": "={{ $('Webhook').item.json.body.CPF }}"
            },
            {
              "name": "Consulta",
              "value": "={{ $json['Consulta erro'] }}"
            },
            {
              "name": "Retorno Consulta",
              "value": "Erro"
            },
            {
              "name": "Webhook",
              "value": "={{ $('Webhook').item.json.body.Webhook }}"
            }
          ]
        },
        "options": {}
      },
      "id": "91adb8cd-b774-4893-9806-2dd7874664e1",
      "name": "Resposta Typebot Erro",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -1420,
        2780
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://n8n.unisistemas.tech/webhook/resposta-typebot",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "TelefoneBC",
              "value": "={{ $('Webhook').item.json.body.Telefone }}"
            },
            {
              "name": "CPF",
              "value": "={{ $('Webhook').item.json.body.CPF }}"
            },
            {
              "name": "Consulta",
              "value": "=Aten√ß√£o: O CNPJ informado √© inv√°lido. üö®\nVerifique os n√∫meros e digite corretamente."
            },
            {
              "name": "Retorno Consulta",
              "value": "Erro"
            },
            {
              "name": "Webhook",
              "value": "={{ $('Webhook').item.json.body.Webhook }}"
            }
          ]
        },
        "options": {}
      },
      "id": "75242d31-fdd4-40ec-8d3d-ddaaa39e73a9",
      "name": "Resposta Typebot CNPJ Errado",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -7020,
        1180
      ],
      "alwaysOutputData": true,
      "disabled": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {},
      "id": "6925b1e2-8849-4d60-83fb-bd2568b96521",
      "name": "Merge3",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2.1,
      "position": [
        4440,
        1860
      ]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "dividas-cnpj_1-1-2",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "7786604f-bf95-45e8-ac54-8dd45f972ab5",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        -8060,
        1000
      ],
      "webhookId": "e981f778-b5ac-484d-bff3-e6e75fde90f8"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Dados N8N1').item.json['Prompt PDF'] }}\n\n{{ $('CONSULTA _ TEXTO').item.json['CONSULTA _ TEXTO'].replace(/ - (?![A-Z]{2})/g, '').replace(/_(?![\\w.-]+@[\\w.-]+)/g, '').replace(/_(?![\\w.-]+@[\\w.-]+)/g, '').replace(/\\*/g, '') }}",
        "options": {}
      },
      "id": "b551c155-51c8-472a-b0c5-30c6b1d9b3eb",
      "name": "AI Agent2",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.6,
      "position": [
        5580,
        3640
      ]
    },
    {
      "parameters": {
        "url": "=http://api.ehmconsultas.com:8880/dividas/multi/cnpj_pro/{{ $('If15').item.json.numeroOriginal.replace(/[.\\-\\/\\s]/g, '') }}",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "user_token",
              "value": "29447aaaa3ad93d43d3a0bf5f5eaf19185547be7c0875eab126a229003b0c4e6ab266631"
            },
            {
              "name": "token",
              "value": "KiDXU8psYtx08RrwMbhqQN3X1tDLEcS5J8nznoQZDy2PmSO7XnCtQ5kFZX7x"
            }
          ]
        },
        "options": {
          "redirect": {
            "redirect": {}
          },
          "response": {
            "response": {
              "responseFormat": "json"
            }
          },
          "timeout": 80000
        }
      },
      "id": "f3d2a752-4112-480f-abc1-b03ad87f0d3d",
      "name": "HTTP Request2",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        -3740,
        1320
      ],
      "retryOnFail": false,
      "maxTries": 5,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "fa9ae66b-e2a7-452f-8e85-8bfc5b29e237",
              "leftValue": "={{ $json.data }}",
              "rightValue": "SUCESSO",
              "operator": {
                "type": "object",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "id": "7a43e6ab-85d4-4e55-b7f9-26b8ecdd6dc5",
      "name": "If23",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -3140,
        1320
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "c154cada-a3ee-4a35-aedd-3cc3c7aefe37",
              "leftValue": "={{ $json.error.message }}",
              "rightValue": "timeout",
              "operator": {
                "type": "string",
                "operation": "notContains"
              }
            },
            {
              "id": "b00ef0b3-03d2-456b-818a-518906598c18",
              "leftValue": "={{ $json.error.message }}",
              "rightValue": "501",
              "operator": {
                "type": "string",
                "operation": "notContains"
              }
            },
            {
              "id": "36a3e7b6-6b06-45d1-8cf5-1bea99f1d247",
              "leftValue": "={{ $json.error.message }}",
              "rightValue": "connect ETIMEDOUT",
              "operator": {
                "type": "string",
                "operation": "notContains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -3600,
        1160
      ],
      "id": "639f7520-fd5b-49a3-9f78-2754f4d0f11a",
      "name": "if timeout"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "c154cada-a3ee-4a35-aedd-3cc3c7aefe37",
              "leftValue": "={{ $json.error.message }}",
              "rightValue": "timeout",
              "operator": {
                "type": "string",
                "operation": "notContains"
              }
            },
            {
              "id": "b00ef0b3-03d2-456b-818a-518906598c18",
              "leftValue": "={{ $json.error.message }}",
              "rightValue": "501",
              "operator": {
                "type": "string",
                "operation": "notContains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -3440,
        1320
      ],
      "id": "a3406393-dc06-4061-89f6-60cd36654a1f",
      "name": "if timeout1"
    },
    {
      "parameters": {},
      "id": "a01d4a0c-b27b-464e-960c-5ac8ec2a11e9",
      "name": "Merge60",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2.1,
      "position": [
        4440,
        2560
      ]
    },
    {
      "parameters": {
        "fields": {
          "values": [
            {
              "name": "SCPC",
              "stringValue": "=_Sem pend√™ncias registradas._\n"
            }
          ]
        },
        "include": "selected",
        "options": {}
      },
      "id": "bebbacb9-c256-446f-b6fb-ff357fa6c6fa",
      "name": "SCPC - 49",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.1,
      "position": [
        3400,
        2340
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "b0024250-715b-4df8-b09d-4c515dcbab1d",
              "name": "SCPC",
              "value": "={{ $('If').item.json.data.SCPC }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "id": "fb3d2df5-a707-42d9-b997-82c26a47e00e",
      "name": "Mapa - SCPC2",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.3,
      "position": [
        2600,
        2340
      ],
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "fields": {
          "values": [
            {
              "name": "Protesto",
              "stringValue": "=_Sem pend√™ncias registradas._\n"
            }
          ]
        },
        "include": "selected",
        "options": {}
      },
      "id": "009a9186-a5ab-44b7-b59a-b708cd3520cf",
      "name": "Protesto - 49",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.1,
      "position": [
        3440,
        3140
      ]
    },
    {
      "parameters": {},
      "id": "eeab2a91-49cb-4964-a564-a848106218b5",
      "name": "Merge78",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2.1,
      "position": [
        4420,
        3380
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "7eef6126-408a-479b-8d38-716485b8898f",
              "leftValue": "={{ $json.Protesto }}",
              "rightValue": "Data",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "3e459dcd-d79e-477e-8193-67fca512da44",
      "name": "SE Protesto - 50",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        3200,
        3140
      ]
    },
    {
      "parameters": {
        "fields": {
          "values": [
            {
              "name": "Protesto",
              "stringValue": "={{ $json.Protesto }}"
            }
          ]
        },
        "include": "selected",
        "options": {}
      },
      "id": "02572fa8-28b2-4938-8f0d-a29d367d0ec0",
      "name": "Protesto - 52",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.1,
      "position": [
        3200,
        3380
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "dcebe609-25a3-4e5d-82e6-62075b92af61",
              "name": "Protesto",
              "value": "={{ $('If').item.json.data.Protesto }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "id": "ec33208f-fd21-4724-abbc-47b893b1bcb4",
      "name": "Mapa - Protesto2",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.3,
      "position": [
        2600,
        3140
      ],
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "fields": {
          "values": [
            {
              "name": "SCPC",
              "stringValue": "={{ $json.SCPC }}"
            }
          ]
        },
        "include": "selected",
        "options": {}
      },
      "id": "30076225-a35a-4651-aa32-ff340c0b2c15",
      "name": "SCPC - 53",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.1,
      "position": [
        3200,
        2580
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "7eef6126-408a-479b-8d38-716485b8898f",
              "leftValue": "={{ $json.SCPC }}",
              "rightValue": "Data",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "0add7fec-5691-4512-bf11-b54137667112",
      "name": "SE SCPC - 50",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        3200,
        2340
      ]
    },
    {
      "parameters": {
        "jsCode": "// Captura os dados do SCPC\nconst scpc = $('If').item.json.data['SCPC'];\n\n// Limita a 15 ocorr√™ncias\nconst scpcLimitado = scpc.slice(0, 15);\n\n// Formata os dados no formato desejado\nconst resultado = scpcLimitado.map(item => {\n  return `*Data:* _${item['Dt Ocorr']}_\\n*Cidade:* _${item['Cidade']}_\\n*Origem:* _${item['Nome']}_\\n*Valor:* _${item['Vr D√≠vida']}_\\n`;\n});\n\n// Junta todas as ocorr√™ncias formatadas em uma √∫nica string\nconst textoFinal = resultado.join('\\n');\n\n// Retorna o texto como parte do objeto json dentro de um array\nreturn [{ json: { texto: textoFinal } }];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2800,
        2340
      ],
      "id": "70191b6f-4e6e-4b41-aef5-4197ebd2ef68",
      "name": "Code5",
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "60bc819d-3591-4bdb-bd62-300cc7e6a05b",
              "name": "SCPC",
              "value": "={{ $json.texto }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3000,
        2340
      ],
      "id": "96b25d85-c94d-4712-ba44-86bca5d5508d",
      "name": "Edit Fields2",
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "// Captura os dados do Protesto\nconst protestos = $('If').item.json.data['Protesto'];\n\n// Limita a 15 protestos\nconst protestosLimitados = protestos.slice(0, 15);\n\n// Formata os protestos no formato desejado\nconst resultado = protestosLimitados.map(protesto => {\n  return `*Cidade:* _${protesto['Cidade']} - ${protesto['UF']}_\\n*Data:* _${protesto['Data']}_\\n*Cart√≥rio:* _${protesto['Cart√≥rio']}_\\n*Valor:* _R$${protesto['Valor Protesto']}_\\n`;\n});\n\n// Junta todos os protestos formatados em uma √∫nica string\nconst textoFinal = resultado.join('\\n');\n\n// Retorna o texto como parte do objeto json dentro de um array\nreturn [{ json: { texto: textoFinal } }];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2800,
        3140
      ],
      "id": "a4baf32c-7f27-478b-8b63-993252daa078",
      "name": "Code6",
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "60bc819d-3591-4bdb-bd62-300cc7e6a05b",
              "name": "Protesto",
              "value": "={{ $json.texto }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3000,
        3140
      ],
      "id": "4c5bb029-4dcc-455c-a2ee-4dd9f02652df",
      "name": "Edit Fields3",
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "3dc1efe0-4397-4b12-89e3-b97c36914b36",
              "name": "Pendencias",
              "value": "={{ $json.data['REFIN/PEFIN'] }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "id": "04c00903-18ab-4135-942f-569d43338538",
      "name": "Mapa - Pendencias2",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.3,
      "position": [
        2600,
        1840
      ],
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "fields": {
          "values": [
            {
              "name": "Pendencias",
              "stringValue": "=_Sem pend√™ncias registradas._\n"
            }
          ]
        },
        "include": "selected",
        "options": {}
      },
      "id": "b4594bfc-55b9-49eb-b93a-13f1a17361ed",
      "name": "Pendencias - 83",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.1,
      "position": [
        3400,
        1840
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "7eef6126-408a-479b-8d38-716485b8898f",
              "leftValue": "={{ $json.Pendencias }}",
              "rightValue": "Data",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "5783612c-5a71-4ff8-a551-69c21b75090a",
      "name": "SE Pendencias - 82",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        3200,
        1840
      ]
    },
    {
      "parameters": {
        "fields": {
          "values": [
            {
              "name": "Pendencias",
              "stringValue": "={{ $json.Pendencias }}"
            }
          ]
        },
        "include": "selected",
        "options": {}
      },
      "id": "b867e382-a1cc-407d-8ed2-7c2cc9472008",
      "name": "Pendencias - 87",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.1,
      "position": [
        3200,
        2080
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "60bc819d-3591-4bdb-bd62-300cc7e6a05b",
              "name": "Pendencias",
              "value": "={{ $json.texto }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3000,
        1840
      ],
      "id": "edd0fe47-5fbe-46c5-9c57-35f03aa061d0",
      "name": "Edit Fields1",
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "// Captura os dados das pend√™ncias\nconst pendencias = $('Mapa - Pendencias2').item.json.Pendencias;\n\n// Verifica se h√° pend√™ncias antes de continuar\nif (!pendencias || pendencias.length === 0) {\n  return [{ json: { texto: \"Nenhuma pend√™ncia encontrada.\" } }];\n}\n\n// Limita a 15 pend√™ncias\nconst pendenciasLimitadas = pendencias.slice(0, 15);\n\n// Formata as pend√™ncias no formato desejado\nconst resultado = pendenciasLimitadas.map(pendencia => {\n  return `*Data:* _${pendencia['Dt Ocorr']}_\\n*Contrato:* _${pendencia['Contrato']}_\\n*Origem:* _${pendencia['Tipo']}_\\n*Valor:* _R$${pendencia['Vr D√≠vida'].replace('.', ',')}_\\n`;\n});\n\n// Junta todas as pend√™ncias formatadas em uma √∫nica string\nconst textoFinal = resultado.join('\\n');\n\n// Retorna o texto como parte do objeto json dentro de um array\nreturn [{ json: { texto: textoFinal } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2800,
        1840
      ],
      "id": "e399d206-6fd0-4ddd-ac58-3efe6e8aa5cd",
      "name": "Code7",
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "f8e5d1e6-feda-4373-8e50-936f54a48786",
              "name": "Cr√©ditos",
              "value": "=4",
              "type": "string"
            },
            {
              "id": "e83c4952-cefe-4e2e-accf-865e014c5c20",
              "name": "Op√ß√£o Consulta",
              "value": "CNPJ 1",
              "type": "string"
            },
            {
              "id": "b465d432-f3ad-4b56-8e49-81a06ca7db1a",
              "name": "Tipo Consulta",
              "value": "={{ $workflow.name }}",
              "type": "string"
            },
            {
              "id": "ccbdfb0b-45f1-40b2-b095-fcfefa698376",
              "name": "Telefone",
              "value": "={{ $('Webhook').item.json.body.Telefone }}",
              "type": "string"
            },
            {
              "id": "41bac44d-098a-4889-ad47-0138194c7d6b",
              "name": "Dado consultado",
              "value": "={{ $('If15').item.json.numeroOriginal.replace(/[.\\-\\/\\s]/g, '') }}",
              "type": "string"
            },
            {
              "id": "5f0eaada-894e-45cf-8c51-3f1a65fb785e",
              "name": "Data",
              "value": "={{ $json.data }}",
              "type": "string"
            },
            {
              "id": "f34f0ad5-5beb-4941-a1be-d63c2f099f22",
              "name": "Hora",
              "value": "={{ $json.hora }}",
              "type": "string"
            },
            {
              "id": "80f689ee-d4ec-4b52-ad1d-e1e710f72420",
              "name": "=URL PDF",
              "value": "={{ $('IF PDF').item.json.FileUrl }}",
              "type": "string"
            },
            {
              "id": "7c7fe4c7-5f91-4a5c-af93-3104c80aab4c",
              "name": "Origem Consulta",
              "value": "={{ $('Webhook').item.json.body.Webhook }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        8440,
        4320
      ],
      "id": "f314d3ed-fbd3-4e80-8268-22d43ea2116d",
      "name": "Dados Hist√≥rico"
    },
    {
      "parameters": {
        "jsCode": "const agora = new Date().toLocaleString(\"pt-BR\", { timeZone: \"America/Sao_Paulo\" });\n\n// Divide data e hora\nconst [dataStrRaw, horaStr] = agora.split(' ');\nconst dataStr = dataStrRaw.replace(',', '');\n\n// Extrai dia, m√™s e ano\nconst [dia, mes, ano] = dataStr.split('/');\nconst dataFormatada = `${dia}/${mes}/${ano}`;\n\n// Novo formato ISO (YYYY-MM-DD)\nconst dataISO = `${ano}-${mes}-${dia}`;\n\n// Monta a URL da execu√ß√£o\nconst executionId = $execution.id;\nconst workflowId = $workflow.id;\nconst baseUrl = \"https://n8n.redequeroimoveis.com\";\nconst executionUrl = `${baseUrl}/workflow/${workflowId}/executions/${executionId}`;\n\n// Retorna tudo em um √∫nico objeto\nreturn [{\n  json: {\n    data: dataFormatada,\n    data_iso: dataISO,\n    hora: horaStr,\n    executionUrl: executionUrl\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        8260,
        4320
      ],
      "id": "1ba4ecdf-c21a-496d-bc78-112982208fca",
      "name": "Code4"
    },
    {
      "parameters": {
        "url": "=https://baserow.unisistemas.tech/api/database/rows/table/643/?user_field_names=true&filter__field_6200__contains={{ $('Webhook').item.json.body.Telefone }}",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "user_field_names",
              "value": "true"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Token UU2yIjUeFuKaWhvMc734TVS2oEOKWjp9"
            }
          ]
        },
        "options": {}
      },
      "id": "f0d35b93-29bf-4a62-8cfb-ce6a0bae5917",
      "name": "HTTP Request10",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        5800,
        3400
      ],
      "disabled": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "87ac1dec-3f72-4857-8884-a3cfde60d311",
              "leftValue": "={{ $json.results[0].id }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "exists",
                "singleValue": true
              }
            },
            {
              "id": "60387208-f99b-49b3-a177-eedb897a94a5",
              "leftValue": "={{ $json.results[0].id }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "notExists",
                "singleValue": true
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        5960,
        3400
      ],
      "id": "095f5f29-3449-4162-829a-ba4a1c648737",
      "name": "If27"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "3dc1efe0-4397-4b12-89e3-b97c36914b36",
              "name": "Pendencias",
              "value": "={{ $('If').item.json.data['Pend√™ncias REFIN/PEFIN'] }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "id": "48b757ac-5636-4d23-9de6-5cd46b6c52fb",
      "name": "Mapa - Pendencias",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.3,
      "position": [
        2600,
        2000
      ],
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "// Captura os dados das pend√™ncias\nconst pendencias = $('If').item.json.data['Pend√™ncias REFIN/PEFIN'];\n\n// Limita a 15 pend√™ncias\nconst pendenciasLimitadas = pendencias.slice(0, 15);\n\n// Formata as pend√™ncias no formato desejado\nconst resultado = pendenciasLimitadas.map(pendencia => {\n  return `*Data:* _${pendencia['Dt Ocorr']}_\\n*Contrato:* _${pendencia['Contrato']}_\\n*Origem:* _${pendencia['Tipo']}_\\n*Valor:* _R$${pendencia['Vr D√≠vida'].replace('.', ',')}_\\n`;\n});\n\n// Junta todas as pend√™ncias formatadas em uma √∫nica string\nconst textoFinal = resultado.join('\\n');\n\n// Retorna o texto como parte do objeto json dentro de um array\nreturn [{ json: { texto: textoFinal } }];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2800,
        2000
      ],
      "id": "a590dccf-f6d6-48aa-a8fd-c77ff254e416",
      "name": "Code",
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "b3537d53-3488-4a2c-8c87-079f40680398",
              "leftValue": "={{ $('Webhook').item.json.body.Webhook }}",
              "rightValue": "consultasite44",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "id": "31247389-1c8e-42e4-9298-ad57507c4c77",
      "name": "Se base44",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        8480,
        2380
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "64530896-b254-4c99-991f-167b429c9304",
              "name": "html",
              "value": "={{ \n  (() => {\n    const html = $('Code Formatar HTML').item.json.htmlContent;\n    const urlImg = $('If27').item.json['URL PDF Imagem'];\n    const urlFallback = $('Dados N8N1').item.json['URL-LOGO'];\n    const url = urlImg && urlImg.trim() !== '' ? urlImg : urlFallback;\n    return html.replace(/LOGOARTHUR/g, url).replace(/URL-LOGO/g, url);\n  })()\n    .replace(/```html|```|Inicio HTML|In√≠cio HTML|Fim HTML/g, '')\n}}",
              "type": "string"
            },
            {
              "id": "842b2f23-b0c2-4713-a419-890e04377971",
              "name": "urlpdf",
              "value": "={{ $('IF PDF').item.json.FileUrl }}",
              "type": "string"
            },
            {
              "id": "774d16d2-47c6-411a-8c78-78812c161e93",
              "name": "resposta",
              "value": "={{ $('CONSULTA _ TEXTO').item.json['CONSULTA _ TEXTO'].replace(/_ /g, '_').replace(/[*_]/g, '') }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "954d75e0-b3b0-4e04-83a2-68335456af9f",
      "name": "resposta-base44",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.3,
      "position": [
        8840,
        2360
      ]
    },
    {
      "parameters": {
        "operation": "get",
        "tableId": "apin8n",
        "filters": {
          "conditions": [
            {
              "keyName": "dado",
              "keyValue": "={{ $('If15').item.json.numeroOriginal.replace(/[.\\-\\/\\s]/g, '') }}"
            },
            {
              "keyName": "consulta",
              "keyValue": "ehmconsultas - dividas/multi/cnpj"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        -3980,
        940
      ],
      "id": "bb57d48a-1c87-4f27-8553-5d0515c092c1",
      "name": "Obter Supabase",
      "alwaysOutputData": true,
      "credentials": {
        "supabaseApi": {
          "id": "sdFa9K80QsELWsD1",
          "name": "Supabase account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a2ba1813-65ee-4ce4-a393-8f658c12d43f",
              "leftValue": "={{ $json.dado }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -3700,
        940
      ],
      "id": "bc0206b8-ce9f-455e-a9e4-f04274aded6a",
      "name": "Se Supabase"
    },
    {
      "parameters": {
        "jsCode": "// Definir o fuso hor√°rio de Bras√≠lia (GMT-3)\nconst timezoneOffset = -3 * 60; // Bras√≠lia est√° a GMT-3\n\n// Obter a hora atual em UTC e converter para o hor√°rio de Bras√≠lia\nconst now = new Date();\nconst brasiliaTime = new Date(now.getTime() + (timezoneOffset * 60000)); \n\n// Obter as horas e minutos do hor√°rio atual em Bras√≠lia\nconst currentHour = brasiliaTime.getHours();\nconst currentMinute = brasiliaTime.getMinutes();\nconst currentTime = brasiliaTime.toLocaleString('pt-BR', { hour: '2-digit', minute: '2-digit' }); // Formato 09:00\n\n// Definir o hor√°rio de in√≠cio (09:00) e fim (21:00) em Bras√≠lia\nconst startHour = 8;\nconst endHour = 21;\n\n// Verificar se est√° dentro do hor√°rio definido\nlet result = 'Fora do hor√°rio';\n\nif ((currentHour > startHour || (currentHour === startHour && currentMinute >= 0)) && \n    (currentHour < endHour || (currentHour === endHour && currentMinute === 0))) {\n    result = 'Dentro do hor√°rio';\n}\n\n// Retornar o resultado com a hora\nreturn {\n  result,\n  currentTime\n};\n"
      },
      "id": "7345f945-22be-4667-bb0d-ca72ccb54226",
      "name": "Code12",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -5540,
        1160
      ]
    },
    {
      "parameters": {
        "content": "## CONTINUA√á√ÉO",
        "height": 251.51571340885795,
        "width": 571.376359106563,
        "color": 6
      },
      "id": "a197c120-31aa-4054-860d-9801b170b255",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -5620,
        1280
      ]
    },
    {
      "parameters": {},
      "id": "4db266b4-d778-467d-9e72-67968fae2186",
      "name": "Limit2",
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -5540,
        1340
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://n8n.redequeroimoveis.com/webhook/dividas-cnpj_1-2",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "CPF",
              "value": "={{ $('If15').item.json.numeroOriginal.replace(/[.\\-\\/\\s]/g, '') }}"
            },
            {
              "name": "Telefone",
              "value": "={{ $('Webhook').item.json.body.Telefone }}"
            },
            {
              "name": "Webhook",
              "value": "={{ $('Webhook').item.json.body.Webhook }}"
            },
            {
              "name": "URL_LogoPDF",
              "value": "={{ $('Webhook').item.json.body.URL_LogoPDF }}"
            },
            {
              "name": " Tipo consulta",
              "value": "Completa"
            },
            {
              "name": "Prompt Resumo IA",
              "value": "={{ $('Dados N8N1').item.json['Prompt Resumo IA'] }}"
            },
            {
              "name": "Prompt PDF",
              "value": "={{ $('Dados N8N1').item.json['Prompt PDF'] }}"
            },
            {
              "name": "URL-LOGO",
              "value": "={{ $('Dados N8N1').item.json['URL-LOGO'] }}"
            },
            {
              "name": "RequestToken",
              "value": "={{ $('Webhook').item.json.body.RequestToken }}"
            },
            {
              "name": "Informa√ß√µes",
              "value": "={{ $('Webhook').item.json.body[\"Informa√ß√µes\"] }}"
            }
          ]
        },
        "options": {}
      },
      "id": "a913e4b5-141a-4604-82de-ae6c3addcd57",
      "name": "HTTP Request20",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        -5380,
        1340
      ],
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "afcc3e93-675c-4aa5-b623-82242a1f6c2d",
              "leftValue": "={{ $json.result }}",
              "rightValue": "Dentro do hor√°rio",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "610eb8cf-7a13-479b-ae9b-22f739004304",
      "name": "If28",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -5240,
        1160
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "609e4014-dac7-4858-88cc-c6316f98b3cf",
      "name": "Respond to Webhook7",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        -5220,
        1340
      ]
    },
    {
      "parameters": {
        "content": "## BASE 44",
        "height": 222,
        "width": 635,
        "color": 2
      },
      "id": "20dfda03-107b-4082-8ef0-eab1e54d307c",
      "name": "Sticky Note12",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        8380,
        2300
      ]
    },
    {
      "parameters": {
        "content": "## Typebot",
        "height": 222,
        "width": 635,
        "color": 2
      },
      "id": "96d9a946-4ac1-4e21-b85c-cb5395c81c7d",
      "name": "Sticky Note13",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        8380,
        2560
      ]
    },
    {
      "parameters": {
        "content": "## Whatsapp (Botconversa)",
        "height": 222,
        "width": 635,
        "color": 2
      },
      "id": "4df03672-c245-4677-be6d-b0184d4d9ef7",
      "name": "Sticky Note14",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        8380,
        2820
      ]
    },
    {
      "parameters": {
        "content": "## Site",
        "height": 222,
        "width": 635,
        "color": 2
      },
      "id": "f7516b6a-fcf7-4c57-b1d4-d3ff4c1a8f25",
      "name": "Sticky Note15",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        8380,
        3080
      ]
    },
    {
      "parameters": {
        "tableId": "historico",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "Telefone",
              "fieldValue": "={{ $json.Telefone }}"
            },
            {
              "fieldId": "Dado Consultado",
              "fieldValue": "={{ $json[\"Dado consultado\"] }}"
            },
            {
              "fieldId": "Tipo Consulta",
              "fieldValue": "={{ $json[\"Tipo Consulta\"] }}"
            },
            {
              "fieldId": "Cr√©ditos",
              "fieldValue": "={{ $json[\"Cr√©ditos\"] }}"
            },
            {
              "fieldId": "Data",
              "fieldValue": "={{ $json.Data }}"
            },
            {
              "fieldId": "Hora",
              "fieldValue": "={{ $json.Hora }}"
            },
            {
              "fieldId": "URL PDF",
              "fieldValue": "={{ $json[\"URL PDF\"] }}"
            },
            {
              "fieldId": "Origem Consulta",
              "fieldValue": "={{ $json[\"Origem Consulta\"] }}"
            },
            {
              "fieldId": "Op√ß√£o Consulta",
              "fieldValue": "={{ $json[\"Op√ß√£o Consulta\"] }}"
            },
            {
              "fieldId": "exec",
              "fieldValue": "={{ $('Code4').item.json.executionUrl }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        8680,
        4320
      ],
      "id": "baccc0ee-5f57-46f6-b849-fa200e316996",
      "name": "Hist√≥rico Supabse",
      "credentials": {
        "supabaseApi": {
          "id": "sdFa9K80QsELWsD1",
          "name": "Supabase account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://base44.app/api/apps/6819f5703086936c581632c2/entities/Historico",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "api_key",
              "value": "876ed4d9d16b40b3b54ab5da6d49a0a4"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "telefone",
              "value": "={{ $json.Telefone }}"
            },
            {
              "name": "dado_consultado",
              "value": "={{ $json[\"Dado consultado\"] }}"
            },
            {
              "name": "tipo_consulta",
              "value": "={{ $json['Tipo Consulta'] }}"
            },
            {
              "name": "creditos",
              "value": "={{ $json['Cr√©ditos'] }}"
            },
            {
              "name": "data",
              "value": "={{ $('Code4').item.json.data_iso }}"
            },
            {
              "name": "hora",
              "value": "={{ $json.Hora }}"
            },
            {
              "name": "url_pdf",
              "value": "={{ $json['URL PDF'] }}"
            },
            {
              "name": "origem",
              "value": "={{ $json['Origem Consulta'] }}"
            },
            {
              "name": "opcao",
              "value": "={{ $json['Op√ß√£o Consulta'] }}"
            },
            {
              "name": "exec",
              "value": "={{ $('Code4').item.json.executionUrl }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        8680,
        3960
      ],
      "id": "2956ec8e-0e67-4f51-a544-67d4a48ead16",
      "name": "Base44 API - Hist√≥rico",
      "retryOnFail": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://base44.app/api/apps/6810f69b135122c2415c3aa4/entities/RetornoConsulta",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "api_key",
              "value": "876ed4d9d16b40b3b54ab5da6d49a0a4"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "requestToken",
              "value": "={{ $('Webhook').item.json.body.RequestToken }}"
            },
            {
              "name": "html",
              "value": "={{ \n  (() => {\n    const html = $('Code Formatar HTML').item.json.htmlContent;\n    const urlImg = $('If27').item.json['URL PDF Imagem'];\n    const urlFallback = $('Dados N8N1').item.json['URL-LOGO'];\n    const url = urlImg && urlImg.trim() !== '' ? urlImg : urlFallback;\n    return html.replace(/LOGOARTHUR/g, url).replace(/URL-LOGO/g, url);\n  })()\n    .replace(/```html|```|Inicio HTML|In√≠cio HTML|Fim HTML/g, '')\n}}"
            },
            {
              "name": "urlpdf",
              "value": "={{ $('IF PDF').item.json.FileUrl }}"
            },
            {
              "name": "resposta",
              "value": "={{ $('CONSULTA _ TEXTO').item.json['CONSULTA _ TEXTO'].replace(/_ /g, '_').replace(/[*_]/g, '') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        8660,
        2360
      ],
      "id": "252eb712-f717-4fb0-99a9-efc11b460fd3",
      "name": "Base44 API - RetornoConsulta",
      "retryOnFail": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://base44.app/api/apps/6810f69b135122c2415c3aa4/entities/UltimaConsulta",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "api_key",
              "value": "876ed4d9d16b40b3b54ab5da6d49a0a4"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "html",
              "value": "={{ \n  (() => {\n    const html = $('Code Formatar HTML').item.json.htmlContent;\n    const urlImg = $('If27').item.json['URL PDF Imagem'];\n    const urlFallback = $('Dados N8N1').item.json['URL-LOGO'];\n    const url = urlImg && urlImg.trim() !== '' ? urlImg : urlFallback;\n    return html.replace(/LOGOARTHUR/g, url).replace(/URL-LOGO/g, url);\n  })()\n    .replace(/```html|```|Inicio HTML|In√≠cio HTML|Fim HTML/g, '')\n}}"
            },
            {
              "name": "urlpdf",
              "value": "={{ $('IF PDF').item.json.FileUrl }}"
            },
            {
              "name": "resposta",
              "value": "={{ $('CONSULTA _ TEXTO').item.json['CONSULTA _ TEXTO'].replace(/_ /g, '_').replace(/[*_]/g, '') }}"
            },
            {
              "name": "telefone",
              "value": "={{ $json.Telefone }}"
            },
            {
              "name": "dado_consultado",
              "value": "={{ $json[\"Dado consultado\"] }}"
            },
            {
              "name": "data",
              "value": "={{ $('Code4').item.json.data_iso }}"
            },
            {
              "name": "hora",
              "value": "={{ $json.Hora }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        8680,
        4120
      ],
      "id": "f9e75885-28da-421b-93de-e68926b75cfa",
      "name": "Base44 API - √öltima Consulta",
      "retryOnFail": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://api.uniconsultas.io:3000/3406bddf-8759-404e-bd3f-a4261a6c6ce6/register/retirarcredits",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "telefone",
              "value": "={{ $('Webhook').item.json.body.Telefone }}"
            },
            {
              "name": "creditos",
              "value": "={{ $('Retornar Cr√©ditos1').item.json.creditos }}"
            }
          ]
        },
        "options": {}
      },
      "id": "24148aa7-689b-4dcb-9f74-09f929729eac",
      "name": "Retirar Cr√©ditos Se Menor",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        10600,
        3080
      ],
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "const agora = new Date().toLocaleString(\"pt-BR\", { timeZone: \"America/Sao_Paulo\" });\n\n// Divide data e hora\nconst [dataStrRaw, horaStr] = agora.split(' ');\nconst dataStr = dataStrRaw.replace(',', '');\n\n// Extrai dia, m√™s e ano\nconst [dia, mes, ano] = dataStr.split('/');\n\n// Retorna a hora formatada\nreturn [{\n  json: {\n    hora_inicio: horaStr\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -7460,
        1000
      ],
      "id": "d289eca2-db8f-43e4-90e9-bab339dcaa5c",
      "name": "hora_inicio"
    },
    {
      "parameters": {
        "jsCode": "const horaInicioStr = $node[\"hora_inicio\"].json[\"hora_inicio\"];\n\nif (!horaInicioStr) {\n  return [{ json: { resultado: \"Hora in√≠cio n√£o encontrada\", timeDifference: null } }];\n}\n\nconst agora = new Date().toLocaleString(\"pt-BR\", { timeZone: \"America/Sao_Paulo\" });\n\n// Divide data e hora\nconst [, horaStr] = agora.split(' ');\n\n// Converte as horas para objetos Date\nconst [horaInicio, minInicio, segInicio] = horaInicioStr.split(':').map(Number);\nconst [horaAtual, minAtual, segAtual] = horaStr.split(':').map(Number);\n\n// Cria objetos Date para ambos\nconst dataAtual = new Date();\nconst dataInicio = new Date();\n\ndataInicio.setHours(horaInicio, minInicio, segInicio);\ndataAtual.setHours(horaAtual, minAtual, segAtual);\n\n// Calcula a diferen√ßa em segundos\nconst timeDifference = (dataAtual - dataInicio) / 1000;\n\n// Verifica a condi√ß√£o\nconst resultado = timeDifference > 50 ? \"maior\" : \"menor\";\n\nreturn [{\n  json: {\n    resultado: resultado,\n    timeDifference: timeDifference\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -4200,
        1320
      ],
      "id": "4e3e6032-83e4-484e-a6b5-8943a82f0515",
      "name": "verificar-tempo"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a019c0ba-95fa-48ef-80ce-38a16068e20a",
              "leftValue": "={{ $json.resultado }}",
              "rightValue": "menor",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -4000,
        1320
      ],
      "id": "e025c320-72dc-49dd-8c15-a52fbd4eff79",
      "name": "If11"
    },
    {
      "parameters": {
        "jsCode": "const horaInicioStr = $node[\"hora_inicio\"].json[\"hora_inicio\"];\n\nif (!horaInicioStr) {\n  return [{ json: { resultado: \"Hora in√≠cio n√£o encontrada\", timeDifference: null } }];\n}\n\nconst agora = new Date().toLocaleString(\"pt-BR\", { timeZone: \"America/Sao_Paulo\" });\n\n// Divide data e hora\nconst [, horaStr] = agora.split(' ');\n\n// Converte as horas para objetos Date\nconst [horaInicio, minInicio, segInicio] = horaInicioStr.split(':').map(Number);\nconst [horaAtual, minAtual, segAtual] = horaStr.split(':').map(Number);\n\n// Cria objetos Date para ambos\nconst dataAtual = new Date();\nconst dataInicio = new Date();\n\ndataInicio.setHours(horaInicio, minInicio, segInicio);\ndataAtual.setHours(horaAtual, minAtual, segAtual);\n\n// Calcula a diferen√ßa em segundos\nconst timeDifference = (dataAtual - dataInicio) / 1000;\n\n// Verifica a condi√ß√£o\nconst resultado = timeDifference > 110 ? \"maior\" : \"menor\";\n\nreturn [{\n  json: {\n    resultado: resultado,\n    timeDifference: timeDifference\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1780,
        1580
      ],
      "id": "987fd6aa-ddf0-47d7-a4ef-26d690651fd3",
      "name": "verificar-tempo3"
    },
    {
      "parameters": {
        "jsCode": "const horaInicioStr = $node[\"hora_inicio\"].json[\"hora_inicio\"];\n\nif (!horaInicioStr) {\n  return [{ json: { resultado: \"Hora in√≠cio n√£o encontrada\", timeDifference: null } }];\n}\n\nconst agora = new Date().toLocaleString(\"pt-BR\", { timeZone: \"America/Sao_Paulo\" });\n\n// Divide data e hora\nconst [, horaStr] = agora.split(' ');\n\n// Converte as horas para objetos Date\nconst [horaInicio, minInicio, segInicio] = horaInicioStr.split(':').map(Number);\nconst [horaAtual, minAtual, segAtual] = horaStr.split(':').map(Number);\n\n// Cria objetos Date para ambos\nconst dataAtual = new Date();\nconst dataInicio = new Date();\n\ndataInicio.setHours(horaInicio, minInicio, segInicio);\ndataAtual.setHours(horaAtual, minAtual, segAtual);\n\n// Calcula a diferen√ßa em segundos\nconst timeDifference = (dataAtual - dataInicio) / 1000;\n\n// Verifica a condi√ß√£o\nconst resultado = timeDifference > 110 ? \"maior\" : \"menor\";\n\nreturn [{\n  json: {\n    resultado: resultado,\n    timeDifference: timeDifference\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        9460,
        2920
      ],
      "id": "77816c9f-f66f-49c1-8f58-3004ddf0f1ac",
      "name": "verificar-tempo4"
    },
    {
      "parameters": {
        "tableId": "apin8n",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "telefone",
              "fieldValue": "={{ $('Webhook').item.json.body.Telefone }}"
            },
            {
              "fieldId": "dado",
              "fieldValue": "={{ $('If15').item.json.numeroOriginal.replace(/[.\\-\\/\\s]/g, '') }}"
            },
            {
              "fieldId": "data",
              "fieldValue": "={{ $('If').item.json.data }}"
            },
            {
              "fieldId": "opcao",
              "fieldValue": "=CNPJ 1-1"
            },
            {
              "fieldId": "consulta",
              "fieldValue": "ehmconsultas - dividas/multi/cnpj"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        -1640,
        1100
      ],
      "id": "4a29c26a-bf2d-486a-8dea-9cdf6efbd6b6",
      "name": "Salvar Supabase1",
      "credentials": {
        "supabaseApi": {
          "id": "sdFa9K80QsELWsD1",
          "name": "Supabase account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a2ba1813-65ee-4ce4-a393-8f658c12d43f",
              "leftValue": "={{ $json.dado }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -1820,
        1080
      ],
      "id": "369aaa47-44df-42c5-9db7-dd045eb85c11",
      "name": "Se Supabase1",
      "alwaysOutputData": false
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -2040,
        1080
      ],
      "id": "5f9e2391-ca14-4c19-bc12-8f03cde20de4",
      "name": "Limit4"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "e5c78911-1718-4e18-9728-fe15eaa93c45",
              "name": "Informa√ß√µes",
              "value": "={{ $('Webhook').item.json.body[\"Informa√ß√µes\"] }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "feaf6288-95bb-492f-b2d7-856227d3d43d",
      "name": "Informa√ß√µes3",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.3,
      "position": [
        660,
        560
      ]
    },
    {
      "parameters": {
        "operation": "get",
        "tableId": "url-pdf",
        "filters": {
          "conditions": [
            {
              "keyName": "Telefone",
              "keyValue": "={{ $('Webhook').item.json.body.Telefone.startsWith('+') ? $('Webhook').item.json.body.Telefone : '+' + $('Webhook').item.json.body.Telefone }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        5800,
        3200
      ],
      "id": "182ae1e8-8df2-4dbe-88fd-c197b1740f9c",
      "name": "Obter Logo Supabase",
      "alwaysOutputData": true,
      "credentials": {
        "supabaseApi": {
          "id": "sdFa9K80QsELWsD1",
          "name": "Supabase account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {},
      "id": "5c3fc5f5-a0ad-4db6-87db-5ff08b627d98",
      "name": "Limit6",
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        6200,
        3400
      ]
    },
    {
      "parameters": {
        "operation": "get",
        "keyName": "ehmconsultas"
      },
      "type": "n8n-nodes-datastore.datastore",
      "typeVersion": 1,
      "position": [
        -4840,
        1140
      ],
      "id": "ceeab687-d816-41d8-91d0-a45887c9d35f",
      "name": "Datastore"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "a993da6e-d17e-4366-a4d8-9a533252a1c9",
              "name": "value",
              "value": "={{ $json.value.split(\"\\n\") }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -4680,
        1140
      ],
      "id": "aabde1e5-4c97-44b9-a38f-89be9de98fa8",
      "name": "Edit Fields"
    },
    {
      "parameters": {},
      "id": "71160625-d7ca-45df-8e17-a9bec4a12720",
      "name": "Limit7",
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -4520,
        1140
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "f2c0042a-c6de-4c2c-8529-5f2e9d87593d",
              "leftValue": "={{ $json.value[0].split(':')[1].trim() }}",
              "rightValue": "true",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -4360,
        1140
      ],
      "id": "3a6b5c27-58b0-469f-81a1-0be136e4e5bb",
      "name": "If1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "37111169-e67b-43ee-856e-7deb5fa193ab",
              "name": "resposta",
              "value": "=*UniConsultas*\nTodas as consultas em um s√≥ lugar!\n\n------- / / -------\n\n## Consulta Financeira CNPJ\n\n{{ $('CONSULTA _ TEXTO').item.json['CONSULTA _ TEXTO']}}",
              "type": "string"
            },
            {
              "id": "e298fd1f-2f1c-4140-bf94-7c782ced4329",
              "name": "urlpdf",
              "value": "={{ $('IF PDF').item.json.FileUrl }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        8780,
        2620
      ],
      "id": "77343a00-9ca2-46cf-a854-933c79b1064a",
      "name": "resposta typebot"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "8cc86a13-85cf-4301-a6ce-34881ad480c6",
              "leftValue": "={{ $('If4').item.json.urlpdf }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        10240,
        3520
      ],
      "id": "e21a5115-1b84-4aa5-bace-81e1c6f72cca",
      "name": "Se URLPDF"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a4ea19e9-6167-473d-ad80-c739ad364aa5",
              "leftValue": "={{ $('Webhook').item.json.body.Webhook }}",
              "rightValue": "typebot",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        9720,
        3540
      ],
      "id": "e52c075c-1d8e-47b3-95cb-32e6b34df58a",
      "name": "If4"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://evolution.unisistemas.tech/message/sendText/{{ $('Webhook').item.json.body.Webhook.split('_')[1] }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "apikey",
              "value": "={{ $('Webhook').item.json.body.Webhook.split('_').pop() }}"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "number",
              "value": "={{ $('Webhook').item.json.body.Telefone }}"
            },
            {
              "name": "text",
              "value": "=Aten√ß√£o: O link para download do PDF estar√° dispon√≠vel por apenas 1 minuto. Ap√≥s esse per√≠odo, ele ser√° deletado automaticamente.\n\n### PDF\n{{ $('If4').item.json.urlpdf }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        10420,
        3500
      ],
      "id": "6df9f173-e4a9-4d44-a534-218433feecd7",
      "name": "EvolutionAPI - Resposta2",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://evolution.unisistemas.tech/message/sendText/{{ $('Webhook').item.json.body.Webhook.split('_')[1] }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "apikey",
              "value": "={{ $('Webhook').item.json.body.Webhook.split('_').pop() }}"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "number",
              "value": "={{ $('Webhook').item.json.body.Telefone }}"
            },
            {
              "name": "text",
              "value": "={{ $json.resposta\n  .replace(/_ /g, '_')\n  .replace(/---------+/g, '------- / / -------') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        10060,
        3520
      ],
      "id": "a8d763a2-f98d-45c7-a2b8-48aa07234fd8",
      "name": "EvolutionAPI - Resposta3",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "content": "## Resposta Typebot",
        "height": 260,
        "width": 940,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        9660,
        3440
      ],
      "typeVersion": 1,
      "id": "a3fa878d-5dbb-4a29-a6d8-153b370a33b9",
      "name": "Sticky Note7"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        9900,
        3520
      ],
      "id": "025781a8-30fe-40e7-a871-ec2ccffb8570",
      "name": "Limit8"
    }
  ],
  "connections": {
    "If": {
      "main": [
        [
          {
            "node": "Mapa - Pendencias2",
            "type": "main",
            "index": 0
          },
          {
            "node": "Mapa - SCPC2",
            "type": "main",
            "index": 0
          },
          {
            "node": "Mapa - Protesto2",
            "type": "main",
            "index": 0
          },
          {
            "node": "Limit4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Limit1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cr√©ditos a retirar1": {
      "main": [
        [
          {
            "node": "Se cr√©dito existe1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Maior ou igual1": {
      "main": [
        [
          {
            "node": "Retirar Cr√©ditos1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Retirar Cr√©ditos Se Menor",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Verificar saldo": {
      "main": [
        [
          {
            "node": "If20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Retornar Cr√©ditos1": {
      "main": [
        [
          {
            "node": "Cr√©ditos a retirar1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Se cr√©dito existe1": {
      "main": [
        [
          {
            "node": "Maior ou igual1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Retirar Cr√©ditos1": {
      "main": [
        [
          {
            "node": "Verificar saldo",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If20": {
      "main": [
        []
      ]
    },
    "Dados N8N": {
      "main": [
        [
          {
            "node": "hora_inicio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate6": {
      "main": [
        [
          {
            "node": "If9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Respond to Webhook3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Dados N8N1": {
      "main": [
        [
          {
            "node": "Dados N8N",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If15": {
      "main": [
        [
          {
            "node": "Obter Supabase",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "se typebot",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code2": {
      "main": [
        [
          {
            "node": "If15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request7": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If14": {
      "main": [
        [
          {
            "node": "Erro1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request5": {
      "main": [
        [
          {
            "node": "Respond to Webhook3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If16": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Respond to Webhook3": {
      "main": [
        [
          {
            "node": "verificar-tempo4",
            "type": "main",
            "index": 0
          },
          {
            "node": "If4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request19": {
      "main": [
        [
          {
            "node": "Respond to Webhook1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "se typebot": {
      "main": [
        [
          {
            "node": "Resposta Typebot CNPJ Errado",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "typebot": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "se typebot1": {
      "main": [
        [
          {
            "node": "resposta typebot",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If19": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Erro": {
      "main": [
        [
          {
            "node": "Respond to Webhook4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request6": {
      "main": [
        [
          {
            "node": "Respond to Webhook4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Date & Time1": {
      "main": [
        [
          {
            "node": "Code Hor√°rio funcionamento",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code Hor√°rio funcionamento": {
      "main": [
        [
          {
            "node": "Verificar Hor√°rio funcionamento",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Hor√°rio funcionamento1": {
      "main": [
        [
          {
            "node": "se typebot2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Verificar Hor√°rio funcionamento": {
      "main": [
        [
          {
            "node": "Hor√°rio funcionamento1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Fora do hor√°rio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fora do hor√°rio": {
      "main": [
        [
          {
            "node": "se typebot2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If21": {
      "main": [
        [
          {
            "node": "Erro",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "se typebot2": {
      "main": [
        [
          {
            "node": "Resposta Typebot Erro",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If21",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "typebot2": {
      "main": [
        [
          {
            "node": "Respond to Webhook4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit1": {
      "main": [
        [
          {
            "node": "HTTP Request19",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If42": {
      "main": [
        [
          {
            "node": "Informa√ß√µes3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Informa√ß√µes",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If9": {
      "main": [
        [
          {
            "node": "CONSULTA _ TEXTO",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "CONSULTA _ TEXTO": {
      "main": [
        [
          {
            "node": "Obter Logo Supabase",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Groq Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Code3": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait4": {
      "main": [
        [
          {
            "node": "AI Agent2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If22": {
      "main": [
        [
          {
            "node": "Code Formatar HTML",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Limit",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code Formatar HTML": {
      "main": [
        [
          {
            "node": "Gerar PDF API1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Limit3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Wait4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit": {
      "main": [
        [
          {
            "node": "Code3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF PDF": {
      "main": [
        [
          {
            "node": "Limit3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit3": {
      "main": [
        [
          {
            "node": "Code4",
            "type": "main",
            "index": 0
          },
          {
            "node": "Se base44",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Resposta Typebot Erro": {
      "main": [
        [
          {
            "node": "typebot2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Resposta Typebot CNPJ Errado": {
      "main": [
        [
          {
            "node": "typebot",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Erro1": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Informa√ß√µes": {
      "main": [
        [
          {
            "node": "Merge3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "if timeout",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge3": {
      "main": [
        [
          {
            "node": "Merge60",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Dados N8N1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent2": {
      "main": [
        [
          {
            "node": "If22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gerar PDF API1": {
      "main": [
        [
          {
            "node": "IF PDF",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request2": {
      "main": [
        [
          {
            "node": "if timeout1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If23": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Limit1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "if timeout": {
      "main": [
        [
          {
            "node": "If19",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Limit1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "if timeout1": {
      "main": [
        [
          {
            "node": "If23",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Limit1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge60": {
      "main": [
        [
          {
            "node": "Merge78",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SCPC - 49": {
      "main": [
        [
          {
            "node": "Merge60",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Mapa - SCPC2": {
      "main": [
        [
          {
            "node": "Code5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Protesto - 49": {
      "main": [
        [
          {
            "node": "Merge78",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "SE Protesto - 50": {
      "main": [
        [
          {
            "node": "Protesto - 52",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Protesto - 49",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Protesto - 52": {
      "main": [
        [
          {
            "node": "Merge78",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Mapa - Protesto2": {
      "main": [
        [
          {
            "node": "Code6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SCPC - 53": {
      "main": [
        [
          {
            "node": "Merge60",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "SE SCPC - 50": {
      "main": [
        [
          {
            "node": "SCPC - 53",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "SCPC - 49",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code5": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields2": {
      "main": [
        [
          {
            "node": "SE SCPC - 50",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code6": {
      "main": [
        [
          {
            "node": "Edit Fields3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields3": {
      "main": [
        [
          {
            "node": "SE Protesto - 50",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Mapa - Pendencias2": {
      "main": [
        [
          {
            "node": "Code7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Pendencias - 83": {
      "main": [
        [
          {
            "node": "Merge3",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "SE Pendencias - 82": {
      "main": [
        [
          {
            "node": "Pendencias - 87",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Pendencias - 83",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Pendencias - 87": {
      "main": [
        [
          {
            "node": "Merge3",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "SE Pendencias - 82",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code7": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge78": {
      "main": [
        [
          {
            "node": "Aggregate6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Dados Hist√≥rico": {
      "main": [
        [
          {
            "node": "Hist√≥rico Supabse",
            "type": "main",
            "index": 0
          },
          {
            "node": "Base44 API - Hist√≥rico",
            "type": "main",
            "index": 0
          },
          {
            "node": "Base44 API - √öltima Consulta",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code4": {
      "main": [
        [
          {
            "node": "Dados Hist√≥rico",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request10": {
      "main": [
        [
          {
            "node": "If27",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If27": {
      "main": [
        [
          {
            "node": "Limit6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Mapa - Pendencias": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Se base44": {
      "main": [
        [
          {
            "node": "Base44 API - RetornoConsulta",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "se typebot1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "resposta-base44": {
      "main": [
        [
          {
            "node": "Respond to Webhook3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obter Supabase": {
      "main": [
        [
          {
            "node": "Se Supabase",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Se Supabase": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code12": {
      "main": [
        [
          {
            "node": "If28",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit2": {
      "main": [
        [
          {
            "node": "HTTP Request20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request20": {
      "main": [
        [
          {
            "node": "Respond to Webhook7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If28": {
      "main": [
        [
          {
            "node": "Datastore",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Limit2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Base44 API - RetornoConsulta": {
      "main": [
        [
          {
            "node": "resposta-base44",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Retirar Cr√©ditos Se Menor": {
      "main": [
        [
          {
            "node": "Verificar saldo",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "hora_inicio": {
      "main": [
        [
          {
            "node": "Code2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "verificar-tempo": {
      "main": [
        [
          {
            "node": "If11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If11": {
      "main": [
        [
          {
            "node": "HTTP Request2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Limit1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Respond to Webhook1": {
      "main": [
        [
          {
            "node": "verificar-tempo3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "verificar-tempo4": {
      "main": [
        [
          {
            "node": "Retornar Cr√©ditos1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Se Supabase1": {
      "main": [
        [
          {
            "node": "If42",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Salvar Supabase1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit4": {
      "main": [
        [
          {
            "node": "Se Supabase1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Salvar Supabase1": {
      "main": [
        [
          {
            "node": "If42",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Informa√ß√µes3": {
      "main": [
        [
          {
            "node": "Merge3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obter Logo Supabase": {
      "main": [
        [
          {
            "node": "HTTP Request10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit6": {
      "main": [
        [
          {
            "node": "AI Agent2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Datastore": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Limit7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit7": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Limit1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "resposta typebot": {
      "main": [
        [
          {
            "node": "Respond to Webhook3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Se URLPDF": {
      "main": [
        [
          {
            "node": "EvolutionAPI - Resposta2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If4": {
      "main": [
        [
          {
            "node": "Limit8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "EvolutionAPI - Resposta3": {
      "main": [
        [
          {
            "node": "Se URLPDF",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit8": {
      "main": [
        [
          {
            "node": "EvolutionAPI - Resposta3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Respond to Webhook": {
      "main": [
        []
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {
    "HTTP Request1": [
      {
        "json": {
          "data": {
            "Version": "2.0",
            "Status": 200,
            "SCPC": [],
            "Protesto": [],
            "REFIN/PEFIN": [],
            "SERASA": [],
            "CADIN": [],
            "SICCF": [],
            "Cheque sem Fundos": [],
            "A√ß√£o Judicial": [],
            "RazaoSocial": "AMILTON CAIO CESAR SANTOS JUNIOR LTDA"
          }
        }
      }
    ],
    "Webhook": [
      {
        "json": {
          "headers": {
            "connection": "upgrade",
            "host": "n8n.redequeroimoveis.com",
            "content-length": "16888",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "user-agent": "axios/1.8.2",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "CPF": "34484128000190",
            "Telefone": "553799781110",
            "Webhook": "https://new-backend.botconversa.com.br/api/v1/webhooks-automation/catch/66767/SnVqPrK5G7VY/",
            "URL_LogoPDF": "11HQEpkA-HEprYtECt9loSst9Jdm3huIX1KfXnsSX_30",
            " Tipo consulta": "Completa",
            "Prompt Resumo IA": "Voc√™ receber√° dados financeiros e de pend√™ncias relacionadas a um CPF ou CNPJ, incluindo informa√ß√µes como d√≠vidas, protestos, status de cr√©dito e score. Sua tarefa √© organizar essas informa√ß√µes de maneira clara e objetiva, estruturando-as em se√ß√µes e terminando com um breve resumo da situa√ß√£o financeira da pessoa f√≠sica ou jur√≠dica.\n\nInstru√ß√µes para a Estrutura e Reda√ß√£o:\nEstrutura dos Dados:\nInicie apresentando as principais informa√ß√µes do CPF ou CNPJ, como nome, data de nascimento, nome da m√£e e situa√ß√£o na Receita Federal, se dispon√≠vel.\nCrie uma se√ß√£o que apresente, de forma resumida, todas as pend√™ncias financeiras, d√≠vidas e protestos identificados.\nApresente o score de cr√©dito e a probabilidade de inadimpl√™ncia, se forem disponibilizados.\n\nResumo da Situa√ß√£o Financeira:\nElabore um par√°grafo resumindo a situa√ß√£o financeira geral do CPF ou CNPJ.\nUse uma linguagem neutra e clara, apontando os riscos de cr√©dito, quantidade de d√≠vidas ou protestos e qualquer outra informa√ß√£o relevante que possa impactar a an√°lise do perfil financeiro.\n\nObserva√ß√µes Importantes:\nN√ÉO exiba ou informe nenhum dado de contato, incluindo telefones, endere√ßos ou e-mails.\nN√ÉO invente dados que n√£o foram explicitamente fornecidos.\nSiga rigorosamente as normas de prote√ß√£o de dados pessoais (LGPD), respeitando a privacidade do consultado.\n\nSegue abaixo um breve exemplo de resumo\n\"### Resumo da Situa√ß√£o Financeira\nRafael dos Santos Nogueira apresenta um hist√≥rico financeiro com m√∫ltiplas pend√™ncias, incluindo d√≠vidas com institui√ß√µes educacionais e um protesto registrado. O total das pend√™ncias varia, mas a principal d√≠vida se destaca no valor de R$ 1.467,62. Essas ocorr√™ncias podem impactar negativamente seu acesso ao cr√©dito. A situa√ß√£o atual sugere um certo risco de inadimpl√™ncia e √© recomend√°vel que Rafael busque regularizar suas pend√™ncias para evitar complica√ß√µes financeiras futuras.\"\n\nFa√ßa um breve resumo com no m√°ximo 700 caracteres de forma simples explicando a situa√ß√£o financeira utilizando todas as informa√ß√µes fornecidas. N√£o ignore nenhum dado. No resumo voc√™ n√£o precisa escrever ou listar todas as pend√™ncias. Apenas resumir com um total e quantidade dos titulos abaixo.\nO titulo do resumo precisa ser exatamente \"### RESUMO DA SITUA√á√ÉO FINANCEIRA\" (EM LETRAS MAI√öSCULAS)\nUma observa√ß√£o. O titulo dos menus est√£o entre ##\nRetorne apenas os dados a partir de \"## RESUMO DA SITUA√á√ÉO FINANCEIRA\"\n\nSegue abaixo os dados para formatar:",
            "Prompt PDF": "Objetivo:‚Ä®Formatar os dados da consulta de cr√©dito de forma estruturada e organizada, seguindo o modelo de an√°lise de cr√©dito do Serasa, retornando exclusivamente um c√≥digo HTML.\nInstru√ß√µes:\n* Retornar apenas o HTML, sem nenhum outro texto no output.\n* Seguir a estrutura de tabelas para organizar os dados.\n* Usar fontes de at√© 11px para informa√ß√µes dentro das tabelas.\n* Remover o t√≠tulo <h1>, mas adicionar duas quebras de linha (<br><br>) ap√≥s a logo para espa√ßamento.\n* N√£o alterar o campo \"URL-LOGO\", pois ele ser√° substitu√≠do dinamicamente.\n* Adicionar \"Resumo atrav√©s de IA\" no final, com um resumo dos dados recebidos bem b√°sico sem apresentar muitos os valores.\n* Incluir um rodap√© com informa√ß√µes de confidencialidade e LGPD, usando fonte de 9px e alinhado √† esquerda.\n* Nunca utilizar a express√£o \"Dados do Cotista\", apenas \"Dados\".\nFormato esperado:\n* HTML bem estruturado, com se√ß√µes claras.\n* Uso de <div> para blocos de informa√ß√µes e <table> para dados tabulares.\n* Listas <ul> para e-mails, telefones e parentes.\n* Footer fixo no final do relat√≥rio.\n* Caso a frase inicie e termine com _ pode remover. Ex: _Sem pend√™ncias registradas._ fica Sem pend√™ncias registradas.\n* √â obrigat√≥rio que todas as informa√ß√µes fornecidas abaixo conste no HTML.\n* Se tiver \"_Sem pend√™ncias registradas._\", \"_Sem pend√™ncias._\" ou algo que comece e termine com \"_\", remova o \"_\".\n* Se o dados como telefone, email ou parentes n√£o existir nos dados para serem formatados, n√£o crie a div class=\"section\". Voc√™ vai criar somente se existir informa√ß√µes.\n* Se n√£o existir nenhum email, n√£o adicione no html Email\n* Se n√£o existir nenhum telefone, n√£o adicione no html Telefone\n* Se n√£o existir nenhum Poss√≠veis Parentes, n√£o adicione no html Poss√≠veis Parentes\n* Se email estiver vazio ou n√£o existir, n√£o crie no html <strong>Email:</strong>\n* Se telefone estiver vazio ou n√£o existir, n√£o crie no html <strong>Telefone:</strong>\n\nAdicione um texto no final com os dados recebidos de \"RESUMO ATRAV√âS DE IA\"\"\n\nAdicione tamb√©m um rodap√© na p√°gina com fonte tamanho 9 alinhado a esquerda da p√°gina com os seguintes dados:\n\"INFORMA√á√ïES IMPORTANTES\nESTAS INFORMA√á√ïES S√ÉO CONFIDENCIAIS E DEVER√ÉO SER UTILIZADAS, √öNICA E EXCLUSIVAMENTE, PARA ORIENTA√á√ÉO DAS TRANSA√á√ïES COMERCIAIS DO USU√ÅRIO , RESPONSABILIZANDO-SE CIVIL E CRIMINALMENTE POR DANOS QUE OCASIONAR A TERCEIROS, QUANDO UTILIZADAS EM DESACORDO COM A LEGISLA√á√ÉO EM VIGOR.\n\nMINUTA DE DECLARA√á√ÉO LGPD\nDECLARO QUE A UTILIZA√á√ÉO DOS DADOS RESPEITAR√Å AS FINALIDADES E PROCEDIMENTOS LEGALMENTE ADMITIDOS PELA LEI GERAL DE PROTE√á√ÉO DE DADOS DIVULGADOS EM MINHA P√ÅGINA INICIAL DE ACESSO.\"\n\nHTML DE EXEMPLO 1:\n<!DOCTYPE html>\n<html lang=\"pt-BR\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Consulta de An√°lise de Cr√©dito</title>\n    <style>\n        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #eef2f7; }\n        .container { max-width: 900px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); }\n        .banner { width: 100%; height: auto; display: block; margin-bottom: 20px; }\n        .section { margin-bottom: 20px; padding: 20px; border-radius: 8px; background: #f9f9f9; border-left: 5px solid #181d3e; }\n        .section-header { font-size: 18px; font-weight: bold; color: #181d3e; margin-bottom: 15px; }\n        p, ul { margin: 5px 0; line-height: 1.6; }\n        table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 12px; }\n        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }\n        th { background-color: #181d3e; color: #fff; }\n        .highlight { font-weight: bold; color: #dc3545; }\n        .info { font-weight: bold; color: #495057; }\n        .score-box { text-align: center; padding: 20px; background: #e9ecef; border-radius: 8px; font-size: 20px; font-weight: bold; color: #28a745; }\n        .footer { font-size: 9px; padding: 10px; background: #f1f1f1; border-radius: 8px; text-align: left; }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <img src=\"URL-LOGO\" alt=\"Logo\" class=\"banner\"><br><br>\n        \n        <div class=\"section\">\n            <h2 class=\"section-header\">Dados</h2>\n            <p><span class=\"info\">Nome:</span> A&C LIMA HOLDING LTDA</p>\n            <p><span class=\"info\">CNPJ:</span> 34484128000190</p>\n            <p><span class=\"info\">Situa√ß√£o Cadastral:</span> Ativa</p>\n            <p><span class=\"info\">Porte:</span> Demais</p>\n            <p><span class=\"info\">Natureza Jur√≠dica:</span> Sociedade Empres√°ria Limitada</p>\n        </div>\n\n        <div class=\"section\">\n            <h2 class=\"section-header\">Telefone</h2>\n            <p><span class=\"info\">Telefone:</span> (15)32110164</p><br>\n            <h2 class=\"section-header\">Email</h2>\n            <p><span class=\"info\">Email:</span> legalizacao1@net-rosario.com.br</p><br>\n            <h2 class=\"section-header\">Endere√ßo</h2>\n            <p><span class=\"info\">Endere√ßo:</span> AVENIDA AGAMENON MAGALHAES, N√∫mero 1019, PAVMTO5                   SALA  505 - MAURICIO DE NASSAU</p>\n            <p><span class=\"info\">Cidade:</span> Caruaru</p>\n            <p><span class=\"info\">Estado:</span> PE</p>\n            <p><span class=\"info\">CEP:</span> 55014000</p>\n        </div>\n\n        <div class=\"section\">\n            <h2 class=\"section-header\">Atividade Principal</h2>\n            <p><span class=\"info\">Atividade Principal:</span> Constru√ß√£o de edif√≠cios</p>\n        </div>\n\n        <div class=\"section\">\n            <h2 class=\"section-header\">Atividade Secund√°ria</h2>\n            <p><span class=\"info\">Atividade Secund√°ria:</span> Incorpora√ß√£o de empreendimentos imobili√°rios</p>\n        </div>\n\n        <div class=\"section\">\n            <h2 class=\"section-header\">S√≥cios</h2>\n            <ul>\n                <li>AUGUSTO CEZAR LIMA JACINTO</li>\n            </ul>\n        </div>\n\n        <div class=\"section\">\n            <h2 class=\"section-header\">Pend√™ncias</h2>\n            <table>\n                <tr>\n                    <th>Data</th>\n                    <th>Contrato</th>\n                    <th>Origem</th>\n                    <th>Valor</th>\n                </tr>\n                <tr>\n                    <td>11/01/2024</td>\n                    <td>02401289250315</td>\n                    <td>R-EE  - OUTR</td>\n                    <td>R$115,96</td>\n                </tr>\n                <tr>\n                    <td>09/02/2024</td>\n                    <td>02402293463909</td>\n                    <td>R-EE  - OUTR</td>\n                    <td>R$114,96</td>\n                </tr>\n                <tr>\n                    <td>12/03/2024</td>\n                    <td>02403297718281</td>\n                    <td>R-EE  - OUTR</td>\n                    <td>R$115,20</td>\n                </tr>\n                <tr>\n                    <td>30/08/2024</td>\n                    <td>37/2561</td>\n                    <td>P-DUPLICATA</td>\n                    <td>R$3.861,00</td>\n                </tr>\n                <tr>\n                    <td>05/09/2024</td>\n                    <td>47/2567</td>\n                    <td>P-DUPLICATA</td>\n                    <td>R$3.861,00</td>\n                </tr>\n                <tr>\n                    <td>31/10/2024</td>\n                    <td>02410330628074</td>\n                    <td>R-EE  - OUTR</td>\n                    <td>R$22,09</td>\n                </tr>\n            </table>\n        </div>\n\n        <div class=\"section\">\n            <h2 class=\"section-header\">SCPC</h2>\n            <p><span class=\"info\">SCPC:</span> Sem pend√™ncias registradas.</p>\n        </div>\n\n        <div class=\"section\">\n            <h2 class=\"section-header\">Protestos</h2>\n            <table>\n                <tr>\n                    <th>Cidade</th>\n                    <th>Data</th>\n                    <th>Cart√≥rio</th>\n                    <th>Valor</th>\n                </tr>\n                <tr>\n                    <td>Caruaru - PE</td>\n                    <td>30/01/2025</td>\n                    <td>1</td>\n                    <td>R$4.127,41</td>\n                </tr>\n                <tr>\n                    <td>Caruaru - PE</td>\n                    <td>07/02/2025</td>\n                    <td>2</td>\n                    <td>R$4.119,69</td>\n                </tr>\n            </table>\n        </div>\n\n        <div class=\"section\">\n            <h2 class=\"section-header\">Resumo atrav√©s de IA</h2>\n            <p>A&C LIMA HOLDING LTDA apresenta um hist√≥rico financeiro com pend√™ncias registradas, com um total de R$ 4.246,10. Embora n√£o existam protestos, a presen√ßa de d√≠vidas pode impactar negativamente seu acesso ao cr√©dito. Al√©m disso, √© importante lembrar que a situa√ß√£o financeira da empresa pode ser afetada por fatores como a natureza jur√≠dica e o porte da empresa.</p>\n        </div>\n\n        <div class=\"section\">\n            <h2 class=\"section-header\">Sugest√µes para Regulariza√ß√£o em caso de D√©bitos</h2>\n            <ul>\n                <li>üìû <strong>Negociar d√©bitos:</strong> Contate os credores para verificar op√ß√µes de parcelamento.</li>\n                <li>üîç <strong>Acompanhar o CPF:</strong> Mantenha um monitoramento constante para evitar novas restri√ß√µes.</li>\n                <li>üìë <strong>Remover protestos quitados:</strong> Ap√≥s o pagamento, solicite a retirada do registro.</li>\n                <li>üìù <strong>Realizar pagamentos:</strong> Aumente a frequ√™ncia e os valores dos pagamentos para reduzir a d√≠vida.</li>\n            </ul>\n        </div>\n\n        <div class=\"footer\">\n            <p><strong>INFORMA√á√ïES IMPORTANTES:</strong> ESTAS INFORMA√á√ïES S√ÉO CONFIDENCIAIS E DEVER√ÉO SER UTILIZADAS, √öNICA E EXCLUSIVAMENTE, PARA ORIENTA√á√ÉO DAS TRANSA√á√ïES COMERCIAIS DO USU√ÅRIO, RESPONSABILIZANDO-SE CIVIL E CRIMINALMENTE POR DANOS QUE OCASIONAR A TERCEIROS, QUANDO UTILIZADAS EM DESACORDO COM A LEGISLA√á√ÉO EM VIGOR.<br><br></p>\n            <p><strong>MINUTA DE DECLARA√á√ÉO LGPD:</strong> DECLARO QUE A UTILIZA√á√ÉO DOS DADOS RESPEITAR√Å AS FINALIDADES E PROCEDIMENTOS LEGALMENTE ADMITIDOS PELA LEI GERAL DE PROTE√á√ÉO DE DADOS DIVULGADOS EM MINHA P√ÅGINA INICIAL DE ACESSO.</p>\n        </div>\n        \n        <div class=\"footer-link\" style=\"font-size: 9px; margin-top: 5px; text-align: center;\">\n            <a href=\"https://app.unisistemas.tech/Inicio\" target=\"_blank\">Acesse sua consulta em https://app.unisistemas.tech/Inicio</a>\n        </div>\n    </div>\n</body>\n</html>\n\nImportante, escreva \"Inicio HTML\" e \"Fim HTML\" no inicio e no final. Somente isso. N√£o escreva mais nenhum dados fora do c√≥digo.\nQuando for exatamente come√ßar o c√≥digo HTML, escreva da seguinte maneira: Inicio HTML\\n<!DOCTYPE html>\\n\nEscreva no c√≥digo html todas as informa√ß√µes fornecidas. N√£o ignore nenhum dado.\nUma observa√ß√£o. O titulo dos menus entr√£o entre <>\nCaso a frase comece e termine com \"_\", pode remover o \"_\"\nSempre formate no html utilizando TODOS os dados fornecidos abaixo como informa√ß√µes, valores, dados, tudo sem exce√ß√£o.\nVoc√™ vai adicionar na formata√ß√£o somente os dados existentes e informados abaixo.\nImportante. Se o dados como telefone, email ou parentes n√£o estiver dispon√≠vel e n√£o for fornecido, voc√™ n√£o precisa adicionar a \"div class\" no html.\nAdicione \"Sugest√µes para Regulariza√ß√£o em caso de D√©bitos\"\nSempre adicione <br> entre uma \"div class\" e outra.\n√â obrigat√≥rio que pend√™ncias, scpc, d√©bitos, refin e pefin e protestos sejam sempre em tabela.\nSiga fielmente o layout do exemplo de html acima.\nCaso a frase inicie e termine com _ pode remover. Ex: _Sem pend√™ncias registradas._ fica Sem pend√™ncias registradas.\nSe o dados como telefone, email ou parentes n√£o existir nos dados para serem formatados, n√£o crie a div class=\"section\". Voc√™ vai criar somente se existir informa√ß√µes.\n√â importante que voc√™ adicione no HTML somente os dados fornecidos abaixo que s√£o para formatar. Os dados dos HTML de exemplo servem somente para seguir o layout do HTML (Nunca utilize as informa√ß√µes de exemplo ou invente dados para adicionar no html formatado).\n√â obrigat√≥rio que todas as informa√ß√µes fornecidas abaixo conste no HTML.\nRemova todos os _ do html exceto de email.\nImportante, voc√™ vai formatar em pend√™ncias, somente o que est√° em pend√™ncias, voc√™ vai formatar em scpc, somente o que est√° em scpc e vai formatar em protestos, somente o que est√° em protestos. E assim por diante.\n\nAten√ß√£o, fa√ßa \"Resumo atrav√©s de IA\" levando em considera√ß√£o todos os dados informados abaixo.\n\nAten√ß√£o, todos os dados e informa√ß√µes acima server exclusivamente como exemplo para voc√™ estruturar o HTML.\nAs informa√ß√µes na formata√ß√£o do HTML precisam estar na mesma ordem dos dados para formatar.\nUtilize somente os dados abaixo para formatar o HTML:",
            "URL-LOGO": "https://i.imgur.com/g0gImpK.jpeg",
            "Informa√ß√µes": "*Raz√£o Social:* _A&C LIMA HOLDING LTDA_\n*Nome Fantasia:* _A&C LIMA HOLDING_\n*CNPJ:* _34484128000190_\n*Situa√ß√£o Cadastral:* _Ativa_\n\n*Porte:* _Demais_\n*Natureza Juridica:* _Sociedade Empres√°ria Limitada_\n\n## *Telefone*\n(15)32110164\n\n## *Email*\nlegalizacao1@net-rosario.com.br\n\n## *Endere√ßo*\nAVENIDA AGAMENON MAGALHAES, N√∫mero 1019, PAVMTO5                   SALA  505 - MAURICIO DE NASSAU\nCaruaru - PE\nCEP - 55014000\n\n## *Atividade Principal*\nConstru√ß√£o de edif√≠cios\n\n## *Atividade secund√°ria*\nIncorpora√ß√£o de empreendimentos imobili√°rios\n\n## *S√≥cios*\n- _AUGUSTO CEZAR LIMA JACINTO_"
          },
          "webhookUrl": "https://n8n.redequeroimoveis.com:5678/webhook-test/dividas-cnpj_1-1-2",
          "executionMode": "test"
        }
      }
    ]
  },
  "versionId": "95975756-ae8c-424f-b5e9-af8d63db59ca",
  "triggerCount": 1,
  "tags": []
}